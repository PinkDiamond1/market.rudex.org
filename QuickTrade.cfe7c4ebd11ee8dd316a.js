"use strict";(this.webpackChunkRuDEX3_light=this.webpackChunkRuDEX3_light||[]).push([[58],{26466:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(67294),n=s(58074),i=s.n(n),l=s(23037),r=s(82267),o=s(99349),c=s(94184),m=s.n(c),u=s(22463),h=s(12326),d=s(89449),g=s(13973),p=s(60567),v=s(91684),_=s(112),A=s.n(_),E=s(55294),b=s(39014);class f extends a.Component{static propTypes={quote:l.Z.ChainAsset.isRequired,base:l.Z.ChainAsset.isRequired};static defaultProps={};constructor(e){super(e),this.statsInterval=null,this.state={imgError:!1,base:this.props.base,quote:this.props.quote,marketStats:this.props.marketStats,starredMarkets:this.props.starredMarkets,history:this.props.history,volumeUSDT:this.props.volumeUSDT,price:this.props.price,volume:this.props.volume,change:this.props.change}}_toggleMarket(e,t,s){e&&e.preventDefault(),u.Z.getMarketStats.defer(s,t);let a=h.Z.getState().allMarketStats.get(`${t.get("symbol")}_${s.get("symbol")}`);this.statsInterval=setInterval(u.Z.getMarketStats.bind(this,s,t),3e4),this.setState({base:t,quote:s,marketStats:a,price:a?a.price:0,volume:a?a.volumeQuote:0,change:a?a.change:0})}_checkStats(e={close:{},price:{}},t={close:{},price:{}}){return!(e.volumeQuote===t.volumeQuote&&g.Z.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)&&g.Z.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)&&e.change===t.change&&e.volumeBase===t.volumeBase&&g.Z.are_equal_shallow(e.price&&e.price.quote,t.price&&t.price.quote)&&g.Z.are_equal_shallow(e.price&&e.price.base,t.price&&t.price.base))}shouldComponentUpdate(e,t){return t.imgError!==this.state.imgError||t.starredMarkets!==this.state.starredMarkets||t.base.get("id")!==this.state.base.get("id")||t.quote.get("id")!==this.state.quote.get("id")||e.volumeUSDT!==this.props.volumeUSDT||e.price!==this.props.price||e.volume!==this.props.volume||e.change!==this.props.change}UNSAFE_componentWillUpdate(e,t){e.quote.get("symbol")===this.state.quote.get("symbol")&&e.base.get("symbol")===this.state.base.get("symbol")||this.setState({quote:e.quote,base:e.base}),e.volumeUSDT!==this.state.volumeUSDT&&this.setState({volumeUSDT:e.volumeUSDT}),e.price===this.state.price&&e.volume===this.state.volume&&e.change===this.state.change||this.setState({price:e.price,volume:e.volume,change:e.change})}UNSAFE_componentWillMount(){u.Z.getMarketStats.defer(this.state.quote,this.state.base);let e=h.Z.getState().allMarketStats.get(`${this.state.base.get("symbol")}_${this.state.quote.get("symbol")}`);this.statsInterval=setInterval(u.Z.getMarketStats.bind(this,this.state.quote,this.state.base),3e4),this.setState({marketStats:e,price:e?e.price:0,volume:e?e.volumeQuote:0,change:e?e.change:0})}componentWillUnmount(){clearInterval(this.statsInterval)}goToMarket(e){this.state.history.push(`/market/${this.state.base.get("symbol")}_${this.state.quote.get("symbol")}`)}_addMarket(e,t){let s=`${e}_${t}`;this.state.starredMarkets.has(s)?E.Z.removeStarMarket(e,t):E.Z.addStarMarket(e,t),this.setState({starredMarkets:b.Z.getState().starredMarkets})}_onError(e){this.state.imgError||(this.refs[e.toLowerCase()].src="asset-symbols/unknown.png",this.setState({imgError:!0}))}render(){let{hide:e,isLowVolume:t}=this.props,{base:s,quote:n,marketStats:l,volumeUSDT:r,price:c,volume:u,change:h}=this.state;if(t||e)return null;if(!l||r<1)return null;c=c&&c?g.Z.price_text(c.toReal(),s,n):null,u=u?g.Z.format_volume(u,n.get("precision")):null,h=h||null;let d=function(e){if(null===e)return null;let t=e.get("symbol");return t.startsWith("RUDEX.")||-1!==(0,p.E8)().nativeTokens.indexOf(t)||"DONATE"==t||"DEXBOT"==t?t:"unknown"}(s),_=h?parseFloat(h)>0?"change-up":parseFloat(h)<0?"change-down":"":"",E=`${s.get("symbol")}_${n.get("symbol")}`;const b=this.state.starredMarkets.has(E)?"gold-star":"grey-star";return a.createElement("div",{className:m()("grid-block no-overflow fm-container",this.props.className)},a.createElement("div",{className:"grid-block vertical shrink",style:{cursor:"pointer"},onClick:e=>{this.goToMarket(e)}},a.createElement("div",{className:"v-align"},a.createElement("img",{className:"align-center",ref:d.toLowerCase(),onError:this._onError.bind(this,d),style:{maxWidth:70},src:`asset-symbols/${d.toLowerCase()}.png`}))),a.createElement("div",{className:"grid-block vertical no-overflow"},a.createElement("div",{className:"fm-name"},a.createElement(o.Z,{dataPlace:"top",name:s.get("symbol")})," ",":"," ",a.createElement(o.Z,{dataPlace:"top",name:n.get("symbol")})),a.createElement("div",{className:"label-actions"},a.createElement(i(),{component:"span",className:"stat-text",content:"exchange.trading_pair"}),a.createElement("div",{onClick:e=>{this._toggleMarket(e,n,s)},"data-intro":A().translate("walkthrough.switch_button"),style:{padding:"0px 5px 0px 5px",display:"inline",cursor:"pointer"}},a.createElement(v.Z,{className:"shuffle",name:"shuffle",title:A().translate("icons.shuffle")})),a.createElement("a",{style:{cursor:"pointer"},onClick:()=>{this._addMarket(s.get("symbol"),n.get("symbol"))},"data-intro":A().translate("walkthrough.favourite_button")},a.createElement(v.Z,{className:b,name:"fi-star",title:A().translate("icons.fi_star.market")}))),a.createElement("div",{className:"grid-block vertical no-overflow",style:{marginTop:"10px",cursor:"pointer"},onClick:e=>{this.goToMarket(e)}},a.createElement("div",{className:"fm-volume"},a.createElement(i(),{content:"exchange.price"}),":"," ",a.createElement("div",{className:"float-right"},c)),a.createElement("div",{className:"fm-volume"},a.createElement(i(),{content:"exchange.volume"}),":"," ",a.createElement("div",{className:"float-right"},u)),a.createElement("div",{className:"fm-volume"},a.createElement(i(),{content:"exchange.volume_24_usdt"}),":"," ",a.createElement("div",{className:"float-right"},g.Z.format_volume(r,2))),a.createElement("div",{className:"fm-change"},a.createElement(i(),{content:"exchange.change"}),":"," ",a.createElement("div",{className:m()("float-right",_)},h,"%")))))}}f=(0,r.Z)(f);class S extends a.Component{render(){return a.createElement(f,this.props)}}const k=(0,d.$)(S,{listenTo:()=>[h.Z],getProps:e=>({marketStats:h.Z.getState().allMarketStats.get(e.marketId),starredMarkets:b.Z.getState().starredMarkets})});s(55420);var y=s(52531);class T extends a.Component{constructor(e){super(e),this.state={width:null,marketStats:this.props.marketStats,featuredMarkets:[],volume24_usdt:0,markets:[],updating:!0,timeOutID:void 0},this._setDimensions=this._setDimensions.bind(this),this.pingMarkets=this.pingMarkets.bind(this)}componentDidMount(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}UNSAFE_componentWillMount(){let e=this.calcVolumeSort();this.setState({featuredMarkets:e});let t=setTimeout(this.pingMarkets,3e3);this.setState({timeOutID:t})}pingMarkets(){let e,t=h.Z.getState().allMarketStats;if(0!==t.size){let s=this.calcVolumeSort();this.setState({featuredMarkets:s,marketStats:t,updating:!1}),e=setTimeout(this.pingMarkets,2e4)}else e=setTimeout(this.pingMarkets,3e3);this.setState({timeOutID:e})}shouldComponentUpdate(e,t){return!g.Z.are_equal_shallow(t.featuredMarkets,this.state.featuredMarkets)||e.marketStats!==this.props.marketStats||t.marketStats!==this.state.marketStats||t.volume24_usdt!==this.state.volume24_usdt||t.width!==this.state.width}componentWillUnmount(){window.removeEventListener("resize",this._setDimensions)}_setDimensions(){let e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}getVolumeUSDT(e,t,s){let a=s.get(`${e}_${t}`),n=0;if(a&&"RUDEX.USDT"==e)n=1*a.volumeQuote;else try{let t,i=s.get(`RUDEX.USDT_${e}`);i&&i.price&&0!=i.price.quote.amount&&(t=i.price.quote.amount/i.price.base.amount*Math.pow(10,i.price.base.precision)/Math.pow(10,i.price.quote.precision),n=a.volumeQuote*t*1)}catch(e){}return n}_SortFilterPairs(e){return e.map((e=>(0,p.Rx)().find((t=>t[0]==e[1]&&t[1]==e[0]))?"RUDEX.USDT"===e[0]?[e[0],e[1],0]:[e[1],e[0],0]:(e[0],[e[0],e[1],0])))}calcVolumeSort(){let e=[],t=[],s=0,a=(0,p.sY)();for(let t=0;t<a.length-1;t++)for(let s=t+1;s<a.length;s++)e.push([a[t],a[s],0,0,0,0]);e=this._SortFilterPairs(e);let n=h.Z.getState().allMarketStats;if(0==n.size)return e;for(let a=0;a<e.length-1;a++){let i=0;i=this.getVolumeUSDT(e[a][0],e[a][1],n);let l=n.get(`${e[a][1]}_${e[a][0]}`),r=void 0!==l?l.price:0,o=void 0!==l?l.volumeQuote:0,c=void 0!==l?l.change:0;t.push([e[a][0],e[a][1],i,r,o,c]),s+=i}return this.setState({volume24_usdt:s}),t}render(){let{featuredMarkets:e,marketStats:t}=this.state,s=0,n=e.sort((function(e,t){return 1*t[2]-1*e[2]})).map((e=>(s++,a.createElement(k,{key:s,marketId:e[1]+"_"+e[0],className:"",quote:e[0],base:e[1],volumeUSDT:e[2],history:this.props.history,hide:s>400,price:e[3],volume:e[4],change:e[5]}))));return a.createElement("div",{className:"grid-block vertical dashboardRuDEX"},a.createElement("div",{ref:"container",className:"grid-container"},!0===this.state.updating?a.createElement("div",{className:"grid-frame vertical"},a.createElement(y.Z,{loadingText:A().translate("footer.loading")})):a.createElement("div",{className:"grid-frame vertical"},a.createElement("div",{className:"block-content-header",style:{padding:0,margin:0}},a.createElement("div",{style:{paddingBottom:"24px"}},a.createElement(i(),{content:"exchange.volume_24",component:"h1",style:{margin:"10px 0px 5px 0rem"}})," ","$",g.Z.format_number(this.state.volume24_usdt,2))),a.createElement("div",{className:"grid-block small-up-1 medium-up-3 large-up-4  no-overflow fm-outer-container"},0===this.state.volume24_usdt?null:n)),void 0===t||0===t.size?n:null))}}let x=e=>a.createElement(T,e);const I=x=(0,d.$)(x,{listenTo:()=>[b.Z,h.Z],getProps:()=>({viewSettings:b.Z.getState().viewSettings,marketStats:h.Z.getState().allMarketStats})})},82603:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(67294),n=s(55420),i=s(30806),l=s(112),r=s.n(l);const o=e=>{const t=Math.round(e.votes/e.goal*100);return a.createElement("div",{className:"root"},a.createElement("svg",{viewBox:"0 0 32 32",className:"chart"},a.createElement("circle",{className:"donut-hole",r:"16",cx:"16",cy:"16",fill:"none"}),a.createElement("circle",{className:"donut-ring",r:"16",cx:"16",cy:"16",fill:"none",stroke:"lightgray",strokeWidth:"8"}),a.createElement("circle",{className:"donut-segment",r:"16",cx:"16",cy:"16",fill:"none",stroke:"green",strokeWidth:"8",style:{strokeDasharray:`${t} 100`},strokeDashoffset:"0"})),a.createElement("div",{className:"inside"},a.createElement("div",{className:"percent"},t+"%")))};var c=s(23951),m=s(76660),u=s(39014),h=s(89449),d=s(32793),g=s(58074),p=s.n(g),v=s(91684);class _ extends a.Component{constructor(e){super(e),this.props.coin.votes=0}triggerSend(e){this.setState({send_asset:e},(()=>{this.send_modal&&this.send_modal.show()}))}render(){try{this.props.account.get("name")}catch(e){}let{coin:e}=this.props;return a.createElement("div",{className:"listingTable__row"},a.createElement(c.Z,{id:"send_modal_listing",refCallback:e=>{e&&(this.send_modal=e)},from_name:this.props.currentAccount?this.props.currentAccount:this.props.account,to_name:e.account?e.account:"",asset_id:"1.3.2",ticker:e.ticker,header:"listing.modal.header2"}),a.createElement("div",{className:"listingAsset"},a.createElement("div",{className:"listingAssetCard"},a.createElement("div",{className:"listingTable__cell listingTableRank align-center"},this.props.rank),a.createElement("div",{className:"listingTable__cell listingTableLogo"},a.createElement("img",{className:"align-center",style:{maxWidth:40},src:`coins-logo/${e.ticker.toLowerCase()}.png`,alt:""})),a.createElement("div",{className:"listingTable__cell listingTableAssetName align-left nowrap"},e.name," (",e.ticker,")",!0===e.soon?a.createElement(p(),{content:"listing.table.coming_soon",style:{float:"right",color:"gold"}}):""),a.createElement("div",{className:"listingTable__cell listingTableLogo"},a.createElement(p(),{href:e.page,content:"listing.goto",component:"a",target:"_blank"}))),a.createElement("div",{className:"listingAssetInfo"},a.createElement("div",{className:"listingAssetInfoData"},a.createElement("div",{className:"listingTable__cell listingTableGoal"},a.createElement("div",{className:"listingAssetInfoBlock"},a.createElement(p(),{content:"listing.table.goal"}),": "," "),e.goal),e.listed?"":a.createElement("div",{className:"listingTable__cell listingTableVotes"},a.createElement("div",{className:"listingAssetInfoBlock"},a.createElement(p(),{content:"listing.table.donates"}),": "),e.votes,!0===e.soon?a.createElement(m.Button,{className:"coin-soon",disabled:!0},a.createElement(v.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"})):a.createElement("a",{className:".ant-btn buttonDonate",onClick:this.triggerSend.bind(this,"1.3.2",e)},a.createElement(v.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"}))),a.createElement("div",{className:"listingTable__cell listingTableStatus"},a.createElement("div",{className:"listingAssetInfoBlock"},a.createElement(p(),{content:"listing.table.status"}),": "," "),a.createElement(p(),{content:"listing.table."+e.status}))),e.listed?"":a.createElement("div",{className:"listingTable__cell listingTableProgress"},a.createElement(o,{votes:e.votes_for_percent,goal:e.goal})))))}}const A=_=(0,h.$)(_,{listenTo:()=>[u.Z,d.Z],getProps:()=>({settings:u.Z.getState().settings,currentAccount:d.Z.getState().currentAccount||d.Z.getState().passwordAccount})});var E=s(60567),b=s(34091),f=s(3894),S=s(73727),k=s(774),y=s(52531);class T extends a.Component{constructor(e){super(e),this.state={ListingNotice1Informed:!1,coins:[],updating:!0,currentLocale:this.props.currentLocale},this.data={links:{agreement_ru:"https://rudex.freshdesk.com/support/solutions/articles/35000138247-cоглашение-об-оказании-услуг-шлюза",agreement_en:"https://rudex.freshdesk.com/support/solutions/articles/35000138245-gateway-service-agreement"},donateTokenName:"DONATE",donateMarket:"DONATE_RUDEX.USDT"}}UNSAFE_componentWillReceiveProps(e){e.currentLocale!==this.state.currentLocale&&this.setState({currentLocale:e.currentLocale})}onSubmitRequest(e){e.preventDefault(),this.setState({error:null}),window.open("ru"==this.state.currentLocale?"https://docs.google.com/forms/d/1lJnvufc95CDh2z1Ntq7iCSEs3oD7tPG4nljKTYYezQw":"https://docs.google.com/forms/d/1X2PguAaRzxlXZGLAarGcmNd-LbJCy8lcoMBcQjFSQ5k","_blank")}onListingNotice1Informed(){this.setState({ListingNotice1Informed:!this.state.ListingNotice1Informed})}componentDidMount(){setInterval((()=>this._getBalances()),1e3)}shouldComponentUpdate(e,t){return 0==t.updating}_getBalances(){let e=(0,E.aV)();0!==this.state.coins.length&&(e=this.state.coins),this.setState({coins:e,updating:!0}),e.forEach((e=>{(0,i.FetchChain)("getAsset",this.data.donateTokenName).then((t=>{n.Apis.instance().db_api().exec("get_named_account_balances",[e.account,[t.get("id")]]).then((s=>{let a=this.state.coins;a.find((t=>t.account===e.account)).votes=s[0].amount/Math.pow(10,t.get("precision")),this.setState({coins:a})})).then((()=>{this.setState({updating:!1})}))}))}))}render(){return a.createElement("div",{className:"grid-block vertical"},!0===this.state.updating?a.createElement(y.Z,{loadingText:r().translate("footer.loading")}):this.getTableTabs())}getContent(){return a.createElement("div",{className:"listingTable"},a.createElement("p",null,a.createElement(S.rU,{style:{margin:2,fontSize:"1.0rem"},to:`/market/${this.data.donateMarket}`},a.createElement(p(),{content:"listing.get_donate_tokens"}),a.createElement("span",{style:{margin:2,fontSize:"1.0rem"}},a.createElement(f.Z,{maxWidth:25,replaceNoneToBts:!1,name:this.data.donateTokenName}),this.data.donateTokenName),a.createElement(p(),{content:"listing.token"}))),a.createElement("div",{className:"listingTable__header"},a.createElement("div",{className:"listingAssetCard"},a.createElement("div",{className:"listingTable__cell listingTableRank"},a.createElement(p(),{content:"listing.table.rank"})),a.createElement("div",{className:"listingTable__cell listingTableLogo"}),a.createElement("div",{className:"listingTable__cell listingTableAssetName align-left"},a.createElement(p(),{content:"listing.table.asset_name"}))),a.createElement("div",{className:"listingAssetInfo"},a.createElement("div",{className:"listingAssetInfoData"},a.createElement("div",{className:"listingTable__cell listingTableVotes"},a.createElement(p(),{content:"listing.table.goal"})),a.createElement("div",{className:"listingTable__cell listingTableGoal"},a.createElement(p(),{content:"listing.table.donates"})),a.createElement("div",{className:"listingTable__cell listingTableStatus"},a.createElement(p(),{content:"listing.table.status"}))),a.createElement("div",{className:"listingTable__cell listingTableProgress"},a.createElement(p(),{content:"listing.table.progress"})))),this.getCoinsList())}getContent_listed=()=>a.createElement("div",{className:"listingTable"},a.createElement("div",{className:"listingTable__header"},a.createElement("div",{className:"listingAssetCard"},a.createElement("div",{className:"listingTable__cell listingTableRank"},a.createElement(p(),{content:"listing.table.rank"})),a.createElement("div",{className:"listingTable__cell listingTableLogo"}),a.createElement("div",{className:"listingTable__cell listingTableAssetName align-left"},a.createElement(p(),{content:"listing.table.asset_name"}))),a.createElement("div",{className:"listingAssetInfo"},a.createElement("div",{className:"listingAssetInfoData"},a.createElement("div",{className:"listingTable__cell listingTableVotes"},a.createElement(p(),{content:"listing.table.goal"})),a.createElement("div",{className:"listingTable__cell listingTableStatus"},a.createElement(p(),{content:"listing.table.status"}))))),this.getCoinsList_listed());getCoinsList=()=>{let{coins:e}=this.state;return e.sort(((e,t)=>t.votes-e.votes)).map(((e,t)=>(e.votes_for_percent=e.votes<e.goal?e.votes:e.goal,e.status=e.votes<e.goal?"collecting":"done",1==e.soon?e.status="waiting":e.soon,a.createElement(A,{key:t,rank:t+1,coin:e}))))};getCoinsList_listed=()=>(0,E.cY)().sort(((e,t)=>t.votes-e.votes)).map(((e,t)=>(e.votes_for_percent=e.votes<e.goal?e.votes:e.goal,e.status="done",e.listed=!0,a.createElement(A,{key:t,rank:t+1,coin:e}))));getTableTabs=()=>{let e=a.createElement("span",{style:{fontWeight:"bold"}},"RuDEX"),t=(e={margin:2,fontSize:"1.0rem",paddingRight:5})=>a.createElement(S.rU,{style:e,to:`/asset/${this.data.donateTokenName}`},a.createElement(f.Z,{maxWidth:25,replaceNoneToBts:!1,name:this.data.donateTokenName}),this.data.donateTokenName);return a.createElement("div",{className:"grid-content"},a.createElement("div",{className:"content-block small-12"},a.createElement("div",{className:"tabs-container generic-bordered-box"},a.createElement(b.m,{defaultActiveTab:0,segmented:!1,setting:"permissionsTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding"},a.createElement(b.O,{title:"listing.donate_progress"},a.createElement("label",{className:"horizontal",tabIndex:0},a.createElement("div",{className:"grid-container",style:{padding:"2rem 8px"}},a.createElement("div",{style:{marginBottom:20}}),a.createElement("div",{className:"grid-block small-up-1 medium-up-1 large-up-1 no-overflow"},this.getContent()))),a.createElement("br",null)),a.createElement(b.O,{title:"listing.listed"},a.createElement("label",{className:"horizontal",tabIndex:1},a.createElement("div",{className:"grid-container",style:{padding:"2rem 8px"}},a.createElement("div",{style:{marginBottom:20}}),a.createElement("div",{className:"grid-block small-up-1 medium-up-1 large-up-1 no-overflow"},this.getContent_listed()))),a.createElement("br",null)),a.createElement(b.O,{title:"listing.add_coin"},a.createElement("label",{className:"horizontal",tabIndex:2}),a.createElement("div",{className:"grid-container help-content-layout"},a.createElement("div",{className:"main-content"},a.createElement("h2",null,a.createElement(p(),{content:"listing.texts.header"})),a.createElement("p",{style:{fontSize:"20px"}},a.createElement(p(),{content:"listing.texts.text1"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.text2"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.text3.t1"}),a.createElement(p(),{content:"listing.texts.text3.t2"}),a.createElement(S.rU,{style:{margin:2,fontSize:"1.0rem"},to:`/market/${this.data.donateMarket}`},a.createElement(p(),{content:"listing.texts.text3.get"})),a.createElement(p(),{content:"listing.texts.text4.t1"}),t(),".",a.createElement(p(),{content:"listing.texts.text4.t2"}),t(),a.createElement(p(),{content:"listing.texts.text4.t3"}),a.createElement(m.Button,{className:"buttonDonate"},a.createElement(v.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"})),a.createElement(p(),{content:"listing.texts.text4.t4"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.text5.t1"}),t(),a.createElement(p(),{content:"listing.texts.text5.t2"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.text5.t3"})),a.createElement("p",{style:{fontWeight:"bold"}},a.createElement(p(),{content:"listing.texts.terms.t1"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.t2"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.tu1"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.tu2"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.tu3"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.tu4"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.tu5"})),a.createElement("p",null,a.createElement(p(),{content:"listing.texts.terms.t3"})),a.createElement("h3",null,a.createElement(p(),{content:"listing.texts.rules.header"})),a.createElement("ol",null,a.createElement("li",null,a.createElement(p(),{content:"listing.texts.rules.rule_1"}),a.createElement(p(),{href:"ru"==this.state.currentLocale?this.data.links.agreement_ru:this.data.links.agreement_en,content:"listing.texts.rules.rule_10",component:"a",target:"_blank"}),a.createElement(p(),{content:"listing.texts.rules.rule_11"})),a.createElement("li",null,a.createElement(p(),{content:"listing.texts.rules.rule_2"})),a.createElement("li",null,a.createElement(p(),{content:"listing.texts.rules.rule_3"}),t(),a.createElement(p(),{content:"listing.texts.rules.rule_4"})),a.createElement("li",null,a.createElement(p(),{content:"listing.texts.rules.rule_5"})))),a.createElement("h5",null,a.createElement("input",{type:"checkbox",defaultChecked:this.state.ListingNotice1Informed,onChange:this.onListingNotice1Informed.bind(this)})," ","-"," ",a.createElement(p(),{content:"listing.notice_informed"})),a.createElement("div",{className:"listing_button"},a.createElement(m.Button,{key:"send",disabled:!this.state.ListingNotice1Informed,onClick:this.state.ListingNotice1Informed?this.onSubmitRequest.bind(this):null},a.createElement(p(),{content:"listing.submit_request"}))),a.createElement("h3",null,a.createElement(p(),{content:"listing.texts.end"})," ",e,"!")))))))}}const x=T=(0,h.$)(T,{listenTo:()=>[k.Z],getProps:()=>({currentLocale:k.Z.getState().currentLocale})})},76285:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Q});var a=s(67294),n=s(65601),i=s(99111),l=s(94672),r=s(89449),o=s(89233),c=s(12326),m=s(76660),u=s(58074),h=s.n(u),d=s(45697),g=s.n(d),p=s(98485),v=s(112),_=s.n(v),A=s(43393);function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E.apply(this,arguments)}class b extends a.Component{static propTypes={chains:g().array,placeholder:g().string,style:g().object,selectStyle:g().object};static defaultProps={chains:["Graphene Blockchain"],placeholder:null,style:{},selectStyle:{}};render(){let{chains:e,selectStyle:t,style:s,placeholder:n,value:i,onDropdownVisibleChange:l,...r}=this.props;const o=e.filter(A.Map.isMap).length<=1&&!l;i||(i=e[0]);const c=a.createElement(m.Select,E({onDropdownVisibleChange:l,showArrow:!o&&void 0,style:t,placeholder:a.createElement(h(),{content:n||"utility.asset_select_placeholder"}),value:i},r,{optionFilterProp:"children",filterOption:(e,t)=>t.key.toLowerCase().indexOf(e.toLowerCase())>=0,disabled:o,notFoundContent:_().translate("global.not_found")}),e.filter(A.Map.isMap).map((e=>a.createElement(m.Select.Option,{key:e,value:e},e))));return a.createElement("div",{className:"chain-select",style:s},c)}}const f=b;class S extends a.Component{static propTypes={label:g().string,assetInput:g().string,asset:g().string,assets:g().array,amount:g().string,disabled:g().bool,onAssetInputChange:g().func,onAmountChange:g().func,onImageError:g().func,onSearch:g().func,imgName:g().string,placeholderAmount:g().string,placeholder:g().string};static defaultProps={disabled:!1,imgName:"unknown",placeholderAmount:"0.0",placeholder:""};constructor(e){super(e),this.state={imageError:!1}}componentDidUpdate(e,t){this.props.imgName&&this.props.imgName!==e.imgName&&"unknown"!==this.props.imgName&&this.setState({imageError:!1})}onImageError(){this.setState({imageError:!0})}render(){let{label:e,assetInput:t,asset:s,assets:n,amount:i,onAssetInputChange:l,onSearch:r,onAmountChange:o,imgName:c,placeholder:u,placeholderAmount:d,tooltipText:g}=this.props;this.state.imageError&&(c="unknown");const v=a.createElement(h(),{className:"left-label",component:"label",content:e,style:{fontSize:"1.2rem",margin:"0",padding:"0"}}),_=a.createElement(f,null),A=a.createElement("img",{style:{width:"3.5rem",height:"3.5rem",marginTop:"0.5rem"},onError:this.onImageError.bind(this),src:`asset-symbols/${c.toLowerCase()}.png`}),E=a.createElement(p.Z,{onChange:o,amount:i,asset:s,assets:n,placeholder:d,onSearch:r});return a.createElement("div",{className:"amount-selector-2",style:{minWidth:"3.5rem",width:"100%"}},v,a.createElement(m.Row,{style:{minWidth:"18rem"}},a.createElement(m.Col,{style:{minWidth:"3.5rem"},span:5},A),a.createElement(m.Col,{span:19},a.createElement(m.Tooltip,{placement:"top",title:g},_),E)))}}const k=S;var y=s(91684);class T extends a.Component{static propTypes={sellAssetInput:g().string,sellAsset:g().string,sellAssets:g().array,sellAmount:g().string,sellImgName:g().string,receiveAssetInput:g().string,receiveAsset:g().string,receiveAssets:g().array,receiveAmount:g().string,receiveImgName:g().string,onSellAssetInputChange:g().func.isRequired,onSellAmountChange:g().func.isRequired,onReceiveAssetInputChange:g().func.isRequired,onReceiveAmountChange:g().func.isRequired,onSwap:g().func.isRequired,isSwappable:g().bool};render(){const e=window.innerWidth<850,{sellAssetInput:t,sellAsset:s,sellAssets:n,sellAmount:i,sellImgName:l,receiveAssetInput:r,receiveAsset:o,receiveAssets:c,receiveAmount:u,receiveImgName:h,onSellAssetInputChange:d,onSellAmountChange:g,onReceiveAssetInputChange:p,onReceiveAmountChange:v,onReceiveAssetSearch:_,onSwap:A,isSwappable:E}=this.props,b=a.createElement(k,{label:"exchange.sell",assetInput:t,asset:s,assets:n,amount:i,onAssetInputChange:d,onAmountChange:g,imgName:l,placeholder:"exchange.quick_trade_details.placeholder_sell"}),f=a.createElement(k,{label:"exchange.receive",assetInput:r,asset:o,assets:c,amount:u,onAssetInputChange:p,onSearch:_,onAmountChange:v,imgName:h,placeholder:"exchange.quick_trade_details.placeholder_receive"}),S={align:"center",display:"flex",justifyContent:"center"};E||(S.opacity=.1);const T=a.createElement("div",{style:S},a.createElement(y.Z,{name:"swap",size:"2x",style:e?null:{marginTop:"3rem"},onClick:A}));return a.createElement("div",null,e?a.createElement("div",null,a.createElement(m.Row,null,b),a.createElement(m.Row,null,T),a.createElement(m.Row,null,f)):a.createElement(m.Row,null,a.createElement(m.Col,{span:10},b),a.createElement(m.Col,{span:4},T),a.createElement(m.Col,{span:10},f)))}}const x=T;var I=s(22463),N=s(13973),C=s(30806),w=s(81237);function D(e,t,s){const a=[];let n;t.sort(((e,t)=>t.getPrice()-e.getPrice()));for(let i=0;i<t.length;i++)if(a.length){if(a.forEach((({order:e})=>{n="receive"===s?e.total_for_sale.getAmount():e.total_to_receive.getAmount()})),n>=e)break;a.push({order:t[i],amount:t[i].amountToReceive().amount,total_amount:t[i].total_to_receive.amount,price:t[i].getPrice()})}else a.push({order:t[i],amount:t[i].amountToReceive().amount,total_amount:t[i].total_to_receive.amount,price:t[i].getPrice()});return a}function P(e){let t=[];if(!e||!e.get("balances"))return t;let s=e.get("balances").toJS();t=Object.keys(s).sort(N.Z.sortID);for(let e in s){let a=C.ChainStore.getObject(s[e]);a&&0===a.get("balance")&&t.splice(t.indexOf(e),1)}return t}var M=s(7453),Z=s(26048),R=s(3841),q=s(74366),F=s(33951),L=s(99349);class O extends a.Component{constructor(e){super(e);const t=P(e.currentAccount);this.state={mounted:!1,sub:"",sellAssetInput:"",sellAsset:null,sellAssets:t,sellAmount:"",sellImgName:"unknown",receiveAssetInput:"",receiveAsset:null,receiveAssets:t,receiveAmount:"",receiveImgName:"unknown",activeInput:"",activeAmountInput:"",lookupQuote:"",orders:[],orderView:"amount",fees:null,prices:null,isSubscribedToMarket:!0},this.onSellAssetInputChange=this.onSellAssetInputChange.bind(this),this.onReceiveAssetInputChange=this.onReceiveAssetInputChange.bind(this),this.onSellAmountChange=this.onSellAmountChange.bind(this),this.onReceiveAmountChange=this.onReceiveAmountChange.bind(this),this.onSellImageError=this.onSellImageError.bind(this),this.onReceiveImageError=this.onReceiveImageError.bind(this),this.onReceiveAssetSearch=this.onReceiveAssetSearch.bind(this),this.onSwap=this.onSwap.bind(this),this.handleSubscriptionToggleChange=this.handleSubscriptionToggleChange.bind(this),this.hendleOrderView=this.hendleOrderView.bind(this),this.handleSell=this.handleSell.bind(this),this._subToMarket=this._subToMarket.bind(this),this._checkAndUpdateMarketList=this._checkAndUpdateMarketList.bind(this),this.getAssetList=(0,i.Z)(M.Z.getAssetList.defer,150)}static getDerivedStateFromProps(e,t){let s={};return e.assetToSell&&(s={sellAssetInput:e.assetToSell.get("id"),sellAsset:e.assetToSell,sellImgName:e.assetToSell.get("symbol")}),e.assetToReceive&&(s={...s,receiveAssetInput:e.assetToReceive.get("id"),receiveAsset:e.assetToReceive,receiveImgName:e.assetToReceive.get("symbol")}),s}_routeTo(e,t){let s=e,a=t;e||(s=""),t||(a="");let n="/instant-trade/"+s+"_"+a;this.props.location.pathname!==n&&this.props.history.push(n)}_areEqualAssets(e,t){return this._isLoadedAsset(e)&&this._isLoadedAsset(t)&&e.get("id")===t.get("id")}_isLoadedAsset(e){return!!e&&!!e.toJS}_areAssetsGiven(){return this._isLoadedAsset(this.props.assetToSell)&&this._isLoadedAsset(this.props.assetToReceive)}_haveAssetsChanged(e){return this._isLoadedAsset(this.props.assetToSell)!==this._isLoadedAsset(e.assetToSell)||this._isLoadedAsset(this.props.assetToReceive)!==this._isLoadedAsset(e.assetToReceive)||!this._areEqualAssets(this.props.assetToSell,e.assetToSell)||!this._areEqualAssets(this.props.assetToReceive,e.assetToReceive)}_hasMarketChanged(e){return JSON.stringify(e.marketData)!==JSON.stringify(this.props.marketData)}componentDidUpdate(e){if(this._haveAssetsChanged(e)?this._assetsHaveChanged():this._hasMarketChanged(e)&&this._getOrders(),this.props.searchAssets!==e.searchAssets){this.setState({activeSearch:!0});let e=this.props.searchAssets.toArray().filter((e=>-1!==e.symbol.indexOf(this.state.lookupQuote)));this._checkAndUpdateMarketList(e)}if(this.props.currentAccount!==e.currentAccount){const e=P(this.props.currentAccount);this.setState({sellAssets:e,receiveAssets:e})}}componentDidMount(){this.setState({mounted:!0}),this._areAssetsGiven()&&this._assetsHaveChanged()}componentWillUnmount(){const{sub:e}=this.state,{sellAssetId:t,receiveAssetId:s}=this.getAssetsDetails();e&&I.Z.unSubscribeMarket(t,s)}async _subToMarket(){const{receiveAsset:e,sellAsset:t,sub:s}=this.state;if(e&&t){const{receiveAssetId:a,sellAssetId:n}=this.getAssetsDetails(),{bucketSize:i,currentGroupOrderLimit:l}=this.props;if(s){let[e,t]=s.split("_");if(e===n&&t===a)return;await I.Z.unSubscribeMarket(e,t)}await I.Z.subscribeMarket(e,t,3600,0),this.setState({sub:`${n}_${a}`},(()=>{this.getAllPrices(),this.getAllFees()}))}}async getAllFees(){const{currentAccount:e}=this.props,{sellAsset:t,receiveAsset:s}=this.state;if(t&&s){const a=await async function(e,t,s){return{marketFee:{baseMarketFeePercent:e.getIn(["options","market_fee_percent"])/100+"%",quoteMarketFeePercent:t.getIn(["options","market_fee_percent"])/100+"%",baseMarketFee:e.getIn(["options","market_fee_percent"]),quoteMarketFee:t.getIn(["options","market_fee_percent"])},transactionFee:await async function(e=[],t){let s={},a=[];return e.forEach((e=>{a.push((0,w.rX)({accountID:t.get("id"),feeID:e.get("id"),type:"limit_order_create"}))})),Promise.all(a).then((t=>(e.forEach(((e,a)=>{s[e.get("id")]=t[a]})),s))).catch((e=>(console.error("checkFeeStatusAsync error",e),s)))}([e,t],s)}}(s,t,e);this.setState({fees:a})}}getAssetsDetails(){const{sellAsset:e,receiveAsset:t}=this.state;return{sellAssetId:e?e.get("id"):null,receiveAssetId:t?t.get("id"):null,sellAssetPrecision:e?e.get("precision"):null,receiveAssetPrecision:t?t.get("precision"):null,sellAssetSymbol:e?e.get("symbol"):null,receiveAssetSymbol:t?t.get("symbol"):null}}getAllPrices(){const{activeMarketHistory:e,feedPrice:t}=this.props,s=function(e,t){let s;return e.size&&(s=e.take(2).first().getPrice()),{latestPrice:s||null,feedPrice:t?t.toReal():t}}(e,t);this.setState({prices:s})}_getOrders(){if(!this.state.isSubscribedToMarket)return void console.log(this.props.marketData);const{combinedBids:e}=this.props.marketData,{sellAsset:t,receiveAsset:s,sellAmount:a,receiveAmount:n,activeInput:i}=this.state,{sellAssetPrecision:l,receiveAssetPrecision:r}=this.getAssetsDetails();if(e&&e.length&&t&&s)switch(i){case"receiveAsset":if(a){const t=D(a*10**l,e,"sell");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateReceiveAmount()))}break;case"sellAsset":if(n){const t=D(n*10**r,e,"receive");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateSellAmount()))}break;case"sell":if(a){const t=D(a*10**l,e,"sell");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateReceiveAmount()))}else this.setState({orders:[],receiveAmount:""});break;case"receive":if(n){const t=D(n*10**r,e,"receive");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateSellAmount()))}else this.setState({orders:[],sellAmount:""})}}_assetsHaveChanged(){this._subToMarket()}async _setSellAsset(e,t="sellAsset",s=!0){let a=null;a="string"==typeof e?await(0,C.FetchChain)("getAsset",e):e,this.setState({activeInput:t},(()=>{this._routeTo(a.get("symbol"),this.props.assetToReceive?this.props.assetToReceive.get("symbol"):"")}))}async _setReceiveAsset(e,t="receiveAsset",s=!0){let a=null;a="string"==typeof e?await(0,C.FetchChain)("getAsset",e):e,this.setState({activeInput:t},(()=>{this._routeTo(this.props.assetToSell?this.props.assetToSell.get("symbol"):"",a.get("symbol"))}))}async _swapAssets(e,t=!0){this.setState({sellAmount:"sellAsset"===e?"":this.state.receiveAmount,receiveAmount:"receiveAsset"===e?"":this.state.sellAmount,activeInput:e},(()=>{this._routeTo(this.state.receiveAsset.get("symbol"),this.state.sellAsset.get("symbol"))}))}async onSellAssetInputChange(e){const{receiveAssetId:t}=this.getAssetsDetails();e===t?this._swapAssets("sellAsset"):this._setSellAsset(e)}async onReceiveAssetInputChange(e){const{sellAssetId:t}=this.getAssetsDetails();e===t?this._swapAssets("receiveAsset"):this._setReceiveAsset(e)}onReceiveAssetSearch(e){this.state.mounted&&(C.ChainValidation.is_valid_symbol_error(e,!0)?this.setState({receiveAsset:null,receiveAssetInput:e,activeSearch:!1}):(this.state.receiveAssetInput!==e&&this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{(0,Z.gr)(e,!0,this.getAssetList,this.setState)}),100)))}_checkAndUpdateMarketList(e){let t=e.map((e=>e.id));clearInterval(this.intervalId);const{receiveAssetInput:s}=this.state;let a="";if(C.ChainStore.getAsset(s)){const e=C.ChainStore.getAsset(s).get("id");t.includes(e)&&(a=C.ChainStore.getAsset(s).get("id"))}if(1===t.length){a=t[0];const{currentAccount:e}=this.props;t=P(e),t.push(a)}if(0===t.length){const{currentAccount:e}=this.props;t=P(e)}this.intervalId=setInterval((()=>{clearInterval(this.intervalId),this.setState({receiveAssets:t,activeSearch:!1},(()=>{this._subToMarket()}))}),100)}onSellAmountChange(e){this.state.mounted&&(e.asset!==this.state.sellAssetInput&&this.onSellAssetInputChange(e.asset),this.setState({sellAmount:e.amount,activeInput:"sell",activeAmountInput:"sell"},(()=>{this._getOrders()})))}onReceiveAmountChange(e){this.state.mounted&&(e.asset!==this.state.receiveAssetInput&&this.onReceiveAssetInputChange(e.asset),this.setState({receiveAmount:e.amount,activeInput:"receive",activeAmountInput:"receive"},(()=>{this._getOrders()})))}onSellImageError(){this.setState({sellImgName:"unknown"})}onReceiveImageError(){this.setState({receiveImgName:"unknown"})}onSwap(){this.isSwappable()&&this._swapAssets("neither")}handleSubscriptionToggleChange(){this.setState((e=>({isSubscribedToMarket:!e.isSubscribedToMarket})))}hendleOrderView(){this.setState((e=>({orderView:"amount"===e.orderView?"total":"amount"})))}handleSell(){const{currentAccount:e}=this.props,{sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:a,receiveAssetId:n,sellAssetPrecision:i,receiveAssetPrecision:l}=this.getAssetsDetails(),r=new q.xR({asset_id:a,precision:i,amount:t*10**i}),o=new q.xR({asset_id:n,precision:l,amount:s*10**l}),c=new Date(Date.now()+31536e6),u=new q.F6({for_sale:r,expiration:c,to_receive:o,seller:e.get("id"),fee:{asset_id:"1.3.0",amount:0},fill_or_kill:!0});return I.Z.createLimitOrder2(u).then((e=>{e.error&&"wallet locked"!==e.error.message&&m.Notification.error({message:_().translate("notifications.exchange_unknown_error_place_order",{amount:s,symbol:n})})})).catch((e=>{console.error("order failed:",e)}))}updateSellAmount(){const{orders:e,receiveAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:a}=this.getAssetsDetails();if(1!==e.length){if(e.length>1){const n=e.slice(-1)[0],i=e.slice(e.length-2,e.length-1)[0],l=(t*10**a-i.order.total_for_sale.getAmount())/n.order.getPrice()*10**s/10**a,r=((i.order.total_to_receive.getAmount()+l)/10**s).toFixed(s);this.setState({sellAmount:r})}}else{const a=(t/e[0].order.getPrice()).toFixed(s);this.setState({sellAmount:a})}}updateReceiveAmount(){const{orders:e,sellAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:a}=this.getAssetsDetails();if(1!==e.length){if(e.length>1){const n=e.slice(-1)[0],i=e.slice(e.length-2,e.length-1)[0],l=(t*10**s-i.order.total_to_receive.getAmount())*n.order.getPrice()*10**a/10**s,r=((i.order.total_for_sale.getAmount()+l)/10**a).toFixed(a);this.setState({receiveAmount:r})}}else{const s=(e[0].order.getPrice()*t).toFixed(a);this.setState({receiveAmount:s})}}isSwappable(){return this._areAssetsGiven()}_getTransactionFee(e){const{fees:t,prices:s}=this.state,{sellAssetId:a}=this.getAssetsDetails();return t&&t.transactionFee[a]?e&&e!==a?t.transactionFee[a].fee.amount/10**t.transactionFee[a].fee.precision*s.latestPrice:t.transactionFee[a].fee.amount/10**t.transactionFee[a].fee.precision:0}_getMarketFee(e){const{fees:t,prices:s,receiveAmount:a}=this.state,{receiveAssetId:n}=this.getAssetsDetails();return t?e&&e!==n?t.marketFee.baseMarketFee*a/s.latestPrice/1e4:t.marketFee.baseMarketFee*a/1e4:0}_getFeePercent(e,t){return+t?(+t+ +e)/t-1:0}getDetails(){const{sub:e}=this.state;if(!e)return;const{sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:n,receiveAssetId:i,sellAssetPrecision:l,receiveAssetPrecision:r,receiveAssetSymbol:o}=this.getAssetsDetails(),c=this.getPriceSection(),u=a.createElement(a.Fragment,null,_().translate("exchange.quick_trade_details.effective")," ",a.createElement(F.Z,{base_asset:n,quote_asset:i,base_amount:t*10**l,quote_amount:s*10**r,noPopOver:!0,force_direction:o,noInvertTip:!0})),h=this.getFeeSection(),d=this.getOrdersSection(),g=_().translate("exchange.quick_trade_details.effective")+" "+(100*this.getTotalPercentFee()).toFixed(2),p=this.state.orders.length,v=p<2?_().translate("exchange.quick_trade_details.order"):_().translate("exchange.quick_trade_details.orders");return a.createElement(m.Collapse,{className:"asset-collapse",style:{marginTop:"1rem"}},a.createElement(m.Collapse.Panel,{header:_().translate("exchange.price"),extra:u},c),a.createElement(m.Collapse.Panel,{header:_().translate("exchange.fee"),extra:`${g}%`},h),a.createElement(m.Collapse.Panel,{header:_().translate("exchange.orders"),extra:p?`${p} ${v}`:"no orders"},d))}showDetails(){const{sellAsset:e,receiveAsset:t,sellAmount:s,receiveAmount:a}=this.state;return e&&t&&+s&&+a}showFeedPrice(){const{sellAsset:e,receiveAsset:t}=this.state,{sellAssetId:s,receiveAssetId:a}=this.getAssetsDetails(),n=t.getIn(["bitasset","options","short_backing_asset"]),i=e.getIn(["bitasset","options","short_backing_asset"]);return n===s||i===a}getPriceSection(){const{prices:e,sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:n,receiveAssetId:i,sellAssetPrecision:l,receiveAssetPrecision:r,receiveAssetSymbol:o}=this.getAssetsDetails();return a.createElement(m.Row,null,a.createElement(m.Col,{span:12},a.createElement("div",null,_().translate("exchange.quick_trade_details.your_price")),this.showFeedPrice()&&a.createElement("div",null,_().translate("exchange.quick_trade_details.feed_price")),a.createElement("div",null,_().translate("exchange.quick_trade_details.last_price"))),a.createElement(m.Col,{span:12,style:{textAlign:"right"}},a.createElement("div",null,a.createElement(F.Z,{base_asset:n,quote_asset:i,base_amount:t*10**l,quote_amount:s*10**r,noPopOver:!0,force_direction:o,noInvertTip:!0})),this.showFeedPrice()&&a.createElement("div",null,a.createElement(F.Z,{base_asset:n,quote_asset:i,base_amount:1*10**l,quote_amount:e.feedPrice*10**r,noPopOver:!0,force_direction:o,noInvertTip:!0})),a.createElement("div",null,a.createElement(F.Z,{base_asset:n,quote_asset:i,base_amount:1*10**l,quote_amount:e.latestPrice*10**r,noPopOver:!0,force_direction:o,noInvertTip:!0}))))}getFeeSection(){const{sellAmount:e,receiveAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:n,sellAssetSymbol:i,receiveAssetSymbol:l}=this.getAssetsDetails(),r=this._getTransactionFee().toFixed(s),o=(100*this._getFeePercent(this._getTransactionFee(),e)).toFixed(2),c=this._getMarketFee().toFixed(n),u=(100*this._getFeePercent(this._getMarketFee(),t)).toFixed(2);let[h,d]=this.getLiquidityPenalty();h=h||0===h?(100*h).toFixed(2)+"%":"-",d=d||0===d?(100*d).toFixed(2)+"%":"-";const g=this.showFeedPrice()?`${h} / ${d}`:h;return a.createElement(m.Row,null,a.createElement(m.Col,{span:12},a.createElement("div",null,_().translate("exchange.quick_trade_details.liquidity_penalty")),a.createElement("div",null,_().translate("exchange.quick_trade_details.market_fee"),` ${u}%`),a.createElement("div",null,_().translate("exchange.quick_trade_details.transaction_fee"),` ${o}%`)),a.createElement(m.Col,{span:12,style:{textAlign:"right"}},a.createElement("div",null,g),a.createElement("div",null,c," ",a.createElement(L.Z,{name:l,noTip:!0})),a.createElement("div",null,r," ",a.createElement(L.Z,{name:i,noTip:!0}))))}getOrdersSection(){const{orders:e,orderView:t}=this.state,{sellAssetId:s,receiveAssetId:n,sellAssetPrecision:i,sellAssetSymbol:l,receiveAssetSymbol:r}=this.getAssetsDetails(),o=e.map((e=>({key:e.order.id,id:e.order.id,seller:a.createElement(R.Z,{account:e.order.seller}),amount:a.createElement("div",{onClick:this.hendleOrderView},"amount"===t?e.amount/10**i:e.total_amount/10**i),price:e.price}))),c=a.createElement("span",null,"amount"===t?_().translate("exchange.quick_trade_details.amount"):_().translate("exchange.quick_trade_details.total")," (",a.createElement(L.Z,{name:l,noTip:!0}),")"),u=a.createElement("span",null,_().translate("exchange.quick_trade_details.price")," (",a.createElement(F.Z,{base_asset:s,quote_asset:n,noPopOver:!0,force_direction:r,noInvertTip:!0,hide_value:!0}),")"),d=[{title:_().translate("exchange.quick_trade_details.id"),dataIndex:"id",key:"id",width:"20%"},{title:_().translate("exchange.quick_trade_details.seller"),dataIndex:"seller",key:"seller",width:"20%"},{title:c,dataIndex:"amount",key:"amount",width:"30%"},{title:u,dataIndex:"price",key:"price"}];return a.createElement("div",null,a.createElement(m.Switch,{style:{marginLeft:"0px"},onChange:this.handleSubscriptionToggleChange,checked:this.state.isSubscribedToMarket}),this.state.ordersUpdated&&a.createElement("div",{style:{float:"right"}},_().localize(this.state.ordersUpdated)),a.createElement(h(),{onClick:this.handleSubscriptionToggleChange,content:"exchange.quick_trade_details.subscribe_to_market",style:{marginLeft:"10px",cursor:"pointer"}}),a.createElement(m.Table,{columns:d,dataSource:o,style:{width:"100%",marginTop:"10px"},pagination:o.length>5&&{pageSize:5}}))}getLiquidityPenalty(){const{prices:e,sellAmount:t,receiveAmount:s}=this.state,a=s/t,n=e.latestPrice,i=e.feedPrice;let l,r;return a&&n&&(l=Math.max(1-a/n,1-n/a)),a&&i&&(r=Math.max(1-a/i,1-i/a)),[l,r]}getTotalPercentFee(){const{sellAmount:e,receiveAmount:t}=this.state;return this._getFeePercent(this._getTransactionFee(),e)+this._getFeePercent(this._getMarketFee(),t)+this.getLiquidityPenalty()[0]}hasBalance(){const{sellAmount:e}=this.state,{currentAccount:t}=this.props,s=t.get("balances").toJS(),{sellAssetId:a,sellAssetPrecision:n}=this.getAssetsDetails();if(!s[a])return!1;const i=C.ChainStore.getObject(s[a]).get("balance");return e*10**n+this._getTransactionFee()*10**n<+i}render(){const{sellAssetInput:e,sellAssets:t,sellAmount:s,sellImgName:n,receiveAssetInput:i,receiveAssets:l,receiveAmount:r,receiveImgName:o,sub:c}=this.state,{sellAssetId:u,receiveAssetId:h}=this.getAssetsDetails(),d=this.showDetails()?this.getDetails():null;return a.createElement(m.Card,{className:"quick-trade",style:{align:"center",display:"flex",justifyContent:"center",minWidth:"300px",marginTop:"1rem"}},a.createElement(x,{sellAssetInput:e,sellAsset:u,sellAssets:t,sellAmount:s,sellImgName:n,onSellAssetInputChange:this.onSellAssetInputChange,onSellAmountChange:this.onSellAmountChange,receiveAssetInput:i,receiveAsset:h,receiveAssets:l,receiveAmount:r,receiveImgName:o,onReceiveAssetInputChange:this.onReceiveAssetInputChange,onReceiveAmountChange:this.onReceiveAmountChange,onReceiveAssetSearch:this.onReceiveAssetSearch,onSwap:this.onSwap,isSwappable:this.isSwappable()}),d,a.createElement("div",{style:{marginTop:"1rem",textAlign:"center"}},a.createElement(m.Tooltip,{title:this.hasBalance()?null:_().translate("exchange.no_balance")},a.createElement(m.Button,{key:"sell",type:"primary",disabled:!this.showDetails()||!c||!this.hasBalance(),onClick:this.handleSell},_().translate("exchange.sell")))))}}O=(0,r.$)(O,{listenTo:()=>[o.Z,c.Z],getProps:()=>({searchAssets:o.Z.getState().assets,assetsLoading:o.Z.getState().assetsLoading,marketData:c.Z.getState().marketData,activeMarketHistory:c.Z.getState().activeMarketHistory,bucketSize:c.Z.getState().bucketSize,currentGroupOrderLimit:c.Z.getState().currentGroupOrderLimit,feedPrice:c.Z.getState().feedPrice,marketLimitOrders:c.Z.getState().marketLimitOrders})});const U=O=(0,l.h)(O);var $=s(23037),W=s(82267);function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},z.apply(this,arguments)}class B extends a.Component{static propTypes={assetToSell:$.Z.ChainAsset,assetToReceive:$.Z.ChainAsset};static defaultProps={assetToSell:"USD",assetToReceive:"GPH"};render(){return this.props.assetToReceive.get&&this.props.assetToSell.get?a.createElement(U,this.props):null}}const V=(0,W.Z)(B,{show_loader:!0});class G extends a.Component{render(){let e=this.props.match.params.marketID?this.props.match.params.marketID.toUpperCase().split("_"):["",""];return 2==e.length&&e[0]&&e[0]===e[1]?a.createElement(n.Z,{subtitle:"market_not_found_subtitle"}):a.createElement(V,z({},this.props,{assetToSell:e[0]||"",assetToReceive:2==e.length?e[1]:""}))}}const Q=G},94672:(e,t,s)=>{s.d(t,{u:()=>m,h:()=>u});var a=s(67294),n=s(23037),i=s(80563),l=s(82267),r=s(89449),o=s(32793),c=s(52531);const m=function(e){return!!e&&!!e.get("id")},u=function(e){let t=class extends a.Component{static propTypes={currentAccount:n.Z.ChainAccount};static defaultProps={autosubscribe:!0};constructor(e){super(e)}render(){return m(this.props.currentAccount)?a.createElement(e,this.props):a.createElement(c.Z,null)}};return t=(0,l.Z)(t),t=(0,i.ZP)(t,100,{leading:!1}),(0,r.$)(t,{listenTo:()=>[o.Z],getProps(){let e=o.Z.getState().currentAccount||o.Z.getState().passwordAccount||"please-login";return{currentAccount:new Map([["name",e]])}}})}},26048:(e,t,s)=>{s.d(t,{gr:()=>i,lQ:()=>l,kg:()=>o});var a=s(41737),n=s(30806);function i(e,t=!1,s,a){if(!e&&""!==e)return;let n=e.toUpperCase();n.startsWith("GP")&&n.length>=6&&(n=e.substr(3,n.length-1)),s(n,10,t),a({lookupQuote:n})}function l({searchAssets:e,marketPickerAsset:t,baseAsset:s,quoteAsset:n},{inputValue:i,lookupQuote:l},c,m){c({activeSearch:!0});let u=0,h=[],d=s.get("symbol"),g=n.get("symbol");e.size&&i&&i.length>2&&e.filter((e=>{try{if(e.options.description){let t=JSON.parse(e.options.description);if("visible"in t&&!t.visible)return!1}}catch(e){}return-1!==e.symbol.indexOf(l)})).forEach((e=>{if(u>100)return;u++;let a=o(e.issuer),n=s.get("symbol"),i=e.symbol+"_"+n,l=g==t;(l&&e.symbol!=d||!l&&e.symbol!=g)&&h.push([i,{quote:e.symbol,base:n,issuerId:e.issuer,issuer:a}])}));const p=function(e,t){return t.startsWith("GP")&&t.length>=6&&(t=t.substr(3,t.length-1)),e.sort((([,e],[,s])=>{const n=r(e),i=r(s);if(n.asset!==i.asset){if(n.asset===t)return-1;if(i.asset===t)return 1;if(n.asset>i.asset)return-1;if(n.asset<i.asset)return 1}if(n.isCommittee^i.isCommittee){if(n.isCommittee)return-1;if(i.isCommittee)return 1}const l=(0,a.v$)(e.quote),o=(0,a.v$)(s.quote);return l&&!o?-1:o&&!l||n.gateway>i.gateway?1:n.gateway<i.gateway?-1:0}))}(h,i);m(p)}function r(e){const t={},s=e.quote;if(-1!==s.indexOf(".")){const[e,a]=s.split(".");t.gateway=e,t.asset=a}else t.asset=s;return"1.2.0"===e.issuerId&&(t.isCommittee=!0),t}function o(e){let t=n.ChainStore.getObject(e,!1,!1);return t?t.get("name"):void 0}},99111:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(77226),n=s(66092);const i=function(){return n.Z.Date.now()};var l=s(3782),r=Math.max,o=Math.min;const c=function(e,t,s){var n,c,m,u,h,d,g=0,p=!1,v=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(t){var s=n,a=c;return n=c=void 0,g=t,u=e.apply(a,s)}function E(e){return g=e,h=setTimeout(f,t),p?A(e):u}function b(e){var s=e-d;return void 0===d||s>=t||s<0||v&&e-g>=m}function f(){var e=i();if(b(e))return S(e);h=setTimeout(f,function(e){var s=t-(e-d);return v?o(s,m-(e-g)):s}(e))}function S(e){return h=void 0,_&&n?A(e):(n=c=void 0,u)}function k(){var e=i(),s=b(e);if(n=arguments,c=this,d=e,s){if(void 0===h)return E(d);if(v)return clearTimeout(h),h=setTimeout(f,t),A(d)}return void 0===h&&(h=setTimeout(f,t)),u}return t=(0,l.Z)(t)||0,(0,a.Z)(s)&&(p=!!s.leading,m=(v="maxWait"in s)?r((0,l.Z)(s.maxWait)||0,t):m,_="trailing"in s?!!s.trailing:_),k.cancel=function(){void 0!==h&&clearTimeout(h),g=0,n=d=c=h=void 0},k.flush=function(){return void 0===h?u:S(i())},k}}}]);