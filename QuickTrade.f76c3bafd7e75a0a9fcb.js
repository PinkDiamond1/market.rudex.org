"use strict";(this.webpackChunkRuDEX3_light=this.webpackChunkRuDEX3_light||[]).push([[58],{26466:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var n=s(67294),a=s(58074),i=s.n(a),r=s(23037),l=s(82267),o=s(99349),c=s(94184),m=s.n(c),u=s(22463),h=s(12326),d=s(89449),p=s(13973),g=s(60567),v=s(91684),b=s(112),A=s.n(b),_=s(55294),E=s(39014);class f extends n.Component{static propTypes={quote:r.Z.ChainAsset.isRequired,base:r.Z.ChainAsset.isRequired};static defaultProps={};constructor(e){super(e),this.statsInterval=null,this.state={imgError:!1,base:this.props.base,quote:this.props.quote,marketStats:this.props.marketStats,starredMarkets:this.props.starredMarkets,history:this.props.history,volumeUSDT:this.props.volumeUSDT,price:this.props.price,volume:this.props.volume,change:this.props.change}}_toggleMarket(e,t,s){e&&e.preventDefault(),u.Z.getMarketStats.defer(s,t);let n=h.Z.getState().allMarketStats.get(`${t.get("symbol")}_${s.get("symbol")}`);this.statsInterval=setInterval(u.Z.getMarketStats.bind(this,s,t),3e4),this.setState({base:t,quote:s,marketStats:n,price:n?n.price:0,volume:n?n.volumeQuote:0,change:n?n.change:0})}_checkStats(e={close:{},price:{}},t={close:{},price:{}}){return!(e.volumeQuote===t.volumeQuote&&p.Z.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)&&p.Z.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)&&e.change===t.change&&e.volumeBase===t.volumeBase&&p.Z.are_equal_shallow(e.price&&e.price.quote,t.price&&t.price.quote)&&p.Z.are_equal_shallow(e.price&&e.price.base,t.price&&t.price.base))}shouldComponentUpdate(e,t){return t.imgError!==this.state.imgError||t.starredMarkets!==this.state.starredMarkets||t.base.get("id")!==this.state.base.get("id")||t.quote.get("id")!==this.state.quote.get("id")||e.volumeUSDT!==this.props.volumeUSDT||e.price!==this.props.price||e.volume!==this.props.volume||e.change!==this.props.change}UNSAFE_componentWillUpdate(e,t){e.quote.get("symbol")===this.state.quote.get("symbol")&&e.base.get("symbol")===this.state.base.get("symbol")||this.setState({quote:e.quote,base:e.base}),e.volumeUSDT!==this.state.volumeUSDT&&this.setState({volumeUSDT:e.volumeUSDT}),e.price===this.state.price&&e.volume===this.state.volume&&e.change===this.state.change||this.setState({price:e.price,volume:e.volume,change:e.change})}UNSAFE_componentWillMount(){u.Z.getMarketStats.defer(this.state.quote,this.state.base);let e=h.Z.getState().allMarketStats.get(`${this.state.base.get("symbol")}_${this.state.quote.get("symbol")}`);this.statsInterval=setInterval(u.Z.getMarketStats.bind(this,this.state.quote,this.state.base),3e4),this.setState({marketStats:e,price:e?e.price:0,volume:e?e.volumeQuote:0,change:e?e.change:0})}componentWillUnmount(){clearInterval(this.statsInterval)}goToMarket(e){this.state.history.push(`/market/${this.state.base.get("symbol")}_${this.state.quote.get("symbol")}`)}_addMarket(e,t){let s=`${e}_${t}`;this.state.starredMarkets.has(s)?_.Z.removeStarMarket(e,t):_.Z.addStarMarket(e,t),this.setState({starredMarkets:E.Z.getState().starredMarkets})}_onError(e){this.state.imgError||(this.refs[e.toLowerCase()].src="asset-symbols/unknown.png",this.setState({imgError:!0}))}render(){let{hide:e,isLowVolume:t}=this.props,{base:s,quote:a,marketStats:r,volumeUSDT:l,price:c,volume:u,change:h}=this.state;if(t||e)return null;if(!r||l<1)return null;c=c&&c?p.Z.price_text(c.toReal(),s,a):null,u=u?p.Z.format_volume(u,a.get("precision")):null,h=h||null;let d=function(e){if(null===e)return null;let t=e.get("symbol");return t.startsWith("RUDEX.")||-1!==(0,g.E8)().nativeTokens.indexOf(t)||"DONATE"==t||"DEXBOT"==t?t:"unknown"}(s),b=h?parseFloat(h)>0?"change-up":parseFloat(h)<0?"change-down":"":"",_=`${s.get("symbol")}_${a.get("symbol")}`;const E=this.state.starredMarkets.has(_)?"gold-star":"grey-star";return n.createElement("div",{className:m()("grid-block no-overflow fm-container",this.props.className)},n.createElement("div",{className:"grid-block vertical shrink",style:{cursor:"pointer"},onClick:e=>{this.goToMarket(e)}},n.createElement("div",{className:"v-align"},n.createElement("img",{className:"align-center",ref:d.toLowerCase(),onError:this._onError.bind(this,d),style:{maxWidth:70},src:`asset-symbols/${d.toLowerCase()}.png`}))),n.createElement("div",{className:"grid-block vertical no-overflow"},n.createElement("div",{className:"fm-name"},n.createElement(o.Z,{dataPlace:"top",name:s.get("symbol")})," ",":"," ",n.createElement(o.Z,{dataPlace:"top",name:a.get("symbol")})),n.createElement("div",{className:"label-actions"},n.createElement(i(),{component:"span",className:"stat-text",content:"exchange.trading_pair"}),n.createElement("div",{onClick:e=>{this._toggleMarket(e,a,s)},"data-intro":A().translate("walkthrough.switch_button"),style:{padding:"0px 5px 0px 5px",display:"inline",cursor:"pointer"}},n.createElement(v.Z,{className:"shuffle",name:"shuffle",title:A().translate("icons.shuffle")})),n.createElement("a",{style:{cursor:"pointer"},onClick:()=>{this._addMarket(s.get("symbol"),a.get("symbol"))},"data-intro":A().translate("walkthrough.favourite_button")},n.createElement(v.Z,{className:E,name:"fi-star",title:A().translate("icons.fi_star.market")}))),n.createElement("div",{className:"grid-block vertical no-overflow",style:{marginTop:"10px",cursor:"pointer"},onClick:e=>{this.goToMarket(e)}},n.createElement("div",{className:"fm-volume"},n.createElement(i(),{content:"exchange.price"}),":"," ",n.createElement("div",{className:"float-right"},c)),n.createElement("div",{className:"fm-volume"},n.createElement(i(),{content:"exchange.volume"}),":"," ",n.createElement("div",{className:"float-right"},u)),n.createElement("div",{className:"fm-volume"},n.createElement(i(),{content:"exchange.volume_24_usdt"}),":"," ",n.createElement("div",{className:"float-right"},p.Z.format_volume(l,2))),n.createElement("div",{className:"fm-change"},n.createElement(i(),{content:"exchange.change"}),":"," ",n.createElement("div",{className:m()("float-right",b)},h,"%")))))}}f=(0,l.Z)(f);class S extends n.Component{render(){return n.createElement(f,this.props)}}const y=(0,d.$)(S,{listenTo:()=>[h.Z],getProps:e=>({marketStats:h.Z.getState().allMarketStats.get(e.marketId),starredMarkets:E.Z.getState().starredMarkets})});s(55420);var k=s(52531);class T extends n.Component{constructor(e){super(e),this.state={width:null,marketStats:this.props.marketStats,featuredMarkets:[],volume24_usdt:0,markets:[],updating:!0,timeOutID:void 0},this._setDimensions=this._setDimensions.bind(this),this.pingMarkets=this.pingMarkets.bind(this)}componentDidMount(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}UNSAFE_componentWillMount(){let e=this.calcVolumeSort();this.setState({featuredMarkets:e});let t=setTimeout(this.pingMarkets,3e3);this.setState({timeOutID:t})}pingMarkets(){let e,t=h.Z.getState().allMarketStats;if(0!==t.size){let s=this.calcVolumeSort();this.setState({featuredMarkets:s,marketStats:t,updating:!1}),e=setTimeout(this.pingMarkets,2e4)}else e=setTimeout(this.pingMarkets,3e3);this.setState({timeOutID:e})}shouldComponentUpdate(e,t){return!p.Z.are_equal_shallow(t.featuredMarkets,this.state.featuredMarkets)||e.marketStats!==this.props.marketStats||t.marketStats!==this.state.marketStats||t.volume24_usdt!==this.state.volume24_usdt||t.width!==this.state.width}componentWillUnmount(){window.removeEventListener("resize",this._setDimensions)}_setDimensions(){let e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}getVolumeUSDT(e,t,s){let n=s.get(`${e}_${t}`),a=0;if(n&&"RUDEX.USDT"==e)a=1*n.volumeQuote;else try{let t,i=s.get(`RUDEX.USDT_${e}`);i&&i.price&&0!=i.price.quote.amount&&(t=i.price.quote.amount/i.price.base.amount*Math.pow(10,i.price.base.precision)/Math.pow(10,i.price.quote.precision),a=n.volumeQuote*t*1)}catch(e){}return a}_SortFilterPairs(e){return e.map((e=>(0,g.Rx)().find((t=>t[0]==e[1]&&t[1]==e[0]))?"RUDEX.USDT"===e[0]?[e[0],e[1],0]:[e[1],e[0],0]:(e[0],[e[0],e[1],0])))}calcVolumeSort(){let e=[],t=[],s=0,n=(0,g.sY)();for(let t=0;t<n.length-1;t++)for(let s=t+1;s<n.length;s++)e.push([n[t],n[s],0,0,0,0]);e=this._SortFilterPairs(e);let a=h.Z.getState().allMarketStats;if(0==a.size)return e;for(let n=0;n<e.length-1;n++){let i=0;i=this.getVolumeUSDT(e[n][0],e[n][1],a);let r=a.get(`${e[n][1]}_${e[n][0]}`),l=void 0!==r?r.price:0,o=void 0!==r?r.volumeQuote:0,c=void 0!==r?r.change:0;t.push([e[n][0],e[n][1],i,l,o,c]),s+=i}return this.setState({volume24_usdt:s}),t}render(){let{featuredMarkets:e,marketStats:t}=this.state,s=0,a=e.sort((function(e,t){return 1*t[2]-1*e[2]})).map((e=>(s++,n.createElement(y,{key:s,marketId:e[1]+"_"+e[0],className:"",quote:e[0],base:e[1],volumeUSDT:e[2],history:this.props.history,hide:s>400,price:e[3],volume:e[4],change:e[5]}))));return n.createElement("div",{className:"grid-block vertical dashboardRuDEX"},n.createElement("div",{ref:"container",className:"grid-container"},!0===this.state.updating?n.createElement("div",{className:"grid-frame vertical"},n.createElement(k.Z,{loadingText:A().translate("footer.loading")})):n.createElement("div",{className:"grid-frame vertical"},n.createElement("div",{className:"block-content-header",style:{padding:0,margin:0}},n.createElement("div",{style:{paddingBottom:"24px"}},n.createElement(i(),{content:"exchange.volume_24",component:"h1",style:{margin:"10px 0px 5px 0rem"}})," ","$",p.Z.format_number(this.state.volume24_usdt,2))),n.createElement("div",{className:"grid-block small-up-1 medium-up-3 large-up-4  no-overflow fm-outer-container"},0===this.state.volume24_usdt?null:a)),void 0===t||0===t.size?a:null))}}let x=e=>n.createElement(T,e);const C=x=(0,d.$)(x,{listenTo:()=>[E.Z,h.Z],getProps:()=>({viewSettings:E.Z.getState().viewSettings,marketStats:h.Z.getState().allMarketStats})})},20134:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var n=s(67294),a=s(55420),i=s(30806),r=s(112),l=s.n(r);const o=e=>{const t=Math.round(e.votes/e.goal*100);return n.createElement("div",{className:"root"},n.createElement("svg",{viewBox:"0 0 32 32",className:"chart"},n.createElement("circle",{className:"donut-hole",r:"16",cx:"16",cy:"16",fill:"none"}),n.createElement("circle",{className:"donut-ring",r:"16",cx:"16",cy:"16",fill:"none",stroke:"lightgray",strokeWidth:"8"}),n.createElement("circle",{className:"donut-segment",r:"16",cx:"16",cy:"16",fill:"none",stroke:"green",strokeWidth:"8",style:{strokeDasharray:`${t} 100`},strokeDashoffset:"0"})),n.createElement("div",{className:"inside"},n.createElement("div",{className:"percent"},t+"%")))};var c=s(69864),m=s(42329),u=s(58074),h=s.n(u),d=s(32793),p=s(89449),g=s(98485),v=s(13973),b=s(50379),A=s(82050),_=s(23037),E=s(82267),f=s(91684),S=s(36345),y=s(94184),k=s.n(y),T=s(45697),x=s.n(T),C=s(76660);s(108);class w extends n.Component{static propTypes={label:x().string,error:x().element,placeholder:x().string,onChange:x().func,onAccountChanged:x().func,onAction:x().func,accountName:x().string,account:_.Z.ChainAccount,tabIndex:x().number,disableActionButton:x().bool,allowUppercase:x().bool,typeahead:x().bool,excludeAccounts:x().array,focus:x().bool,disabled:x().bool,editable:x().bool,locked:x().bool,requireActiveSelect:x().bool,noForm:x().bool};static defaultProps={autosubscribe:!1,excludeAccounts:[],disabled:null,editable:null,locked:!1,requireActiveSelect:!0,noForm:!1};constructor(e){super(e),this.state={accountIndex:[],locked:null},this.timer=null}componentDidMount(){let{account:e,accountName:t}=this.props;t&&this._addThisToIndex(t),this.props.myActiveAccounts.map((e=>{this._addThisToIndex(e)})),this.props.contacts.map((e=>{this._addThisToIndex(e)})),this._fetchAccounts(),this.props.onAccountChanged&&e&&this.props.onAccountChanged(e),!this.props.typeahead&&t&&this.onInputChanged(t)}componentDidUpdate(e){this.props.focus&&this.props.editable&&!this.props.disabled&&this.refs.user_input.focus(),e.account&&e.account!==this.props.account&&this.props.onAccountChanged&&this.props.onAccountChanged(this.props.account)}_addToIndex(e,t=!1){t?(this._addThisToIndex(e),this._fetchAccounts()):(clearTimeout(this.timer),this.timer=setTimeout((()=>{this._addToIndex(e,!0)}),500))}_addThisToIndex(e){let{accountIndex:t}=this.state;if(!e)return;let s=t.find((t=>t.name===e));e&&!s&&t.push({name:e,data:null,attempts:0})}_getIndex(e,t){return t.findIndex((t=>t.name===e))}_getSearchArray(){let{accountIndex:e}=this.state;return e.filter((e=>!e.data&&e.attempts<5?e.name:null)).map((e=>e.name))}_fetchAccounts(){let{accountIndex:e}=this.state,t=this._getSearchArray();t.length>0&&(0,i.FetchChainObjects)(i.ChainStore.getAccount,t,3e3,{}).then((s=>{s.forEach((s=>{if(s){let n=this._getIndex(s.get("name"),e),a=this._populateAccountIndex(s);a&&(e[n]=a,t.splice(s.get("name")))}})),t.forEach((t=>{let s=this._getIndex(t,e);e[s].attempts++})),this.setState({accountIndex:e}),this.state.accountIndex.find((e=>!e.data&&e.attempts<5))&&setTimeout((()=>{this._fetchAccounts()}),500)}))}_populateAccountIndex(e){let{myActiveAccounts:t,contacts:s}=this.props;if(!e)return null;let n=e.get("name"),a=i.ChainStore.getAccountMemberStatus(e),r=this.getInputType(n),o=S.Z.isKnownScammer(n)?l().translate("account.member.suspected_scammer"):l().translate("account.member."+a),c="name"===r?"#"+e.get("id").substring(4):"id"===r?e.get("name"):"pubkey"==r&&this.props.allowPubKey?"Public Key":null;return{name:n,attempts:0,data:{id:e.get("id"),name:n,type:r,status:a,isOwnAccount:t.has(n),isContact:s.has(n),isKnownScammer:S.Z.isKnownScammer(n),statusLabel:o,rightLabel:c,className:S.Z.isKnownScammer(n)||!e?"negative":null}}}getAccount(){return this.props.account}getError(){let{account:e,accountName:t,error:s,typeahead:n}=this.props,a=t?this.getInputType(t):null;return n||!e&&t&&"pubkey"!==a&&(s=l().translate("account.errors.unknown")),s||!e||a||(s=l().translate("account.errors.invalid")),s}getInputType(e){return e?"#"===e[0]&&v.Z.is_object_id("1.2."+e.substring(1))?"id":i.ChainValidation.is_account_name(e,!0)?"name":this.props.allowPubKey&&i.PublicKey.fromPublicKeyString(e)?"pubkey":null:null}getVerifiedAccountName(e){let{allowUppercase:t}=this.props,s=null;s="string"==typeof e?e:e&&e.target?e.target.value.trim():"",t||(s=s.toLowerCase());let n=s.replace("#","").match(/(?:\/account\/)(.*)/);return n&&(s=n[1]),s}_notifyOnChange(e,t){let{props:s}=this;"input"==t&&this.props.typeahead&&this.props.requireActiveSelect&&(s.onAccountChanged&&s.onAccountChanged(null),s.onChange&&s.onChange(null));let n=this.getVerifiedAccountName(e);s.onChange&&(n||""===n)&&s.onChange(n),s.onAccountChanged&&(0,i.FetchChain)("getAccount",n,void 0,{[n]:!1}).then((e=>{e&&(this.props.requireActiveSelect&&"select"==t||!this.props.requireActiveSelect)&&s.onAccountChanged(e)})).catch((e=>{console.log(e)}))}onSelect(e){this._notifyOnChange(e,"select")}onInputChanged(e){this._addToIndex(this.getVerifiedAccountName(e)),this._notifyOnChange(e,"input")}onKeyDown(e){13!==e.keyCode&&9!==e.keyCode||this.onAction(e)}_onAddContact(){A.Z.addAccountContact(this.props.accountName)}_onRemoveContact(){A.Z.removeAccountContact(this.props.accountName)}onAction(e){let{onAction:t,disableActionButton:s,account:n,accountName:a}=this.props;e.preventDefault(),this.getError()||!t||s||(n?t(n):"pubkey"===this.getInputType(a)&&t(a))}render(){let{accountIndex:e}=this.state,{account:t,accountName:s,disableActionButton:a}=this.props,i=this.state.accountIndex.find((e=>!e.data&&e.attempts<5));const r=null!==this.state.locked?this.state.locked:this.props.locked;let o,c,m,u,d,p,g=this.getError();if(d=!r&&(null!=this.props.editable?this.props.editable:void 0),u=!!r||(null!=this.props.disabled?this.props.disabled:void 0),t){let s=this._getIndex(t.get("name"),e);c=e&&e[s]?e[s].data:null}if(m=!(t||c&&"pubkey"===c.type)||g||a,c&&c.isOwnAccount?p=n.createElement(C.Tooltip,{placement:"top",title:l().translate("tooltip.own_account")},n.createElement("span",{className:"tooltip green"},n.createElement(C.Icon,{type:"user"}))):c&&c.isKnownScammer?p=n.createElement(C.Tooltip,{placement:"top",title:l().translate("tooltip.scam_account")},n.createElement("span",{className:"tooltip red"},n.createElement(C.Icon,{type:"warning",theme:"filled"}))):c&&c.isContact?p=n.createElement(C.Tooltip,{placement:"top",title:l().translate("tooltip.follow_user"),onClick:this._onRemoveContact.bind(this)},n.createElement("span",{className:"tooltip green"},n.createElement(C.Icon,{type:"star",theme:"filled"}))):c&&(p=n.createElement(C.Tooltip,{placement:"top",title:l().translate("tooltip.follow_user_add"),onClick:this._onAddContact.bind(this)},n.createElement("span",{className:"tooltip"},n.createElement(C.Icon,{type:"star"})))),this.props.typeahead){let t=e.filter((e=>e.data?-1!==this.props.excludeAccounts.indexOf(e.id)?null:e.data.isOwnAccount||!this.props.locked&&e.data.isContact||s&&e.data.name===s?e:void 0:null)).sort(((e,t)=>e.data.isOwnAccount<t.data.isOwnAccount&&e.data.name>t.data.name?1:-1)).map((e=>n.createElement(C.Select.Option,{key:e.data.id,value:e.data.name,disabled:!!e.data.disabled||void 0},e.data.isOwnAccount?n.createElement(C.Icon,{type:"user"}):null,e.data.isContact?n.createElement(C.Icon,{type:"star"}):null,e.data.isKnownScammer?n.createElement(C.Icon,{type:"warning"}):null," ",e.data.name,n.createElement("span",{style:{float:"right"}},e.data.statusLabel))));o=n.createElement(C.Select,{showSearch:!0,optionLabelProp:"value",onSelect:this.onSelect.bind(this),onSearch:this.onInputChanged.bind(this),placeholder:l().translate("account.search"),notFoundContent:l().translate("global.not_found"),value:c?c.name:null,disabled:!!u||void 0},t)}else o=n.createElement(C.Input,{style:{textTransform:c&&"pubkey"===c.type?null:"lowercase",fontVariant:"initial"},name:"username",id:"username",autoComplete:this.props.editable?"username":void 0,type:"text",value:this.props.accountName||"",placeholder:this.props.placeholder||l().translate("account.name"),disabled:!!this.props.disabled||void 0,ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:!this.props.editable||this.props.disabled?-1:this.props.tabIndex,editable:d?d.toString():void 0,readOnly:d?(!d).toString():void 0});let v=this.props.hideImage?null:c&&"pubkey"===c.accountType?n.createElement("div",{className:"account-image"},n.createElement(f.Z,{name:"key",title:"icons.key",size:"4x"})):n.createElement(b.Z,{size:{height:this.props.size||33,width:this.props.size||33},account:c?c.name:null,custom_image:null}),A=r?"":null,_=this.props.label&&c?n.createElement("div",{className:"header-area"+(this.props.hideImage?" no-margin":"")},n.createElement("label",{className:k()("right-label",c.isContact||c.isOwnAccount?"positive":null,c.isKnownScammer?"negative":null),style:{marginTop:-30}},n.createElement("span",{style:{paddingRight:"0.5rem"}},c.rightLabel," ",c.displayText),p)):null;const E=this.props.noForm?n.Fragment:C.Form,S=this.props.noForm?{}:{className:"full-width",layout:"vertical",style:this.props.style};return n.createElement(C.Tooltip,{className:"input-area",title:this.props.tooltip,mouseEnterDelay:.5},n.createElement(E,S,n.createElement(C.Form.Item,{label:this.props.label?l().translate(this.props.label):"",validateStatus:g?"error":null,help:g||null},_,this.props.useHR&&n.createElement("hr",null),n.createElement("div",{className:"inline-label input-wrapper"},v,o,i?n.createElement(C.Icon,{type:"loading",style:{padding:10}}):null,A,this.props.children,this.props.onAction?n.createElement(C.Tooltip,{title:l().translate("tooltip.required_input",{type:l().translate("global.field_type.account")})},n.createElement(C.Button,{type:"primary",disabled:m,onClick:this.onAction.bind(this)},n.createElement(h(),{content:this.props.action_label}))):null))))}}w=(0,E.Z)(w);const I=w=(0,p.$)(w,{listenTo:()=>[d.Z],getProps:()=>({myActiveAccounts:d.Z.getState().myActiveAccounts,contacts:d.Z.getState().accountContacts})});var N=s(73556),Z=s(44015),P=s(60567);function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},D.apply(this,arguments)}s(74366);class M extends m.b{constructor(e){super(e)}UNSAFE_componentWillReceiveProps(e){e.to_name!==this.state.to_name&&this.setState({to_name:e.to_name?e.to_name:"",to_account:e.to_name?i.ChainStore.getAccount(e.to_name):null})}render(){let{propose:e,from_account:t,to_account:s,asset:a,asset_id:r,propose_account:o,feeAmount:m,amount:u,to_name:p,from_name:v,memo:b,balanceError:A,hidden:_}=this.state,E=d.Z.isMyAccount(t)||v===this.props.passwordAccount,f=!(!t||E||e),{asset_types:S}=this._getAvailableAssets(),y=null;if(t&&t.get("balances")&&!f){let e=t.get("balances").toJS(),s=this.state.balanceError?"has-error":"";if(1===S.length&&(a=i.ChainStore.getAsset(S[0])),S.length>0){let t=a?a.get("id"):S[0];y=n.createElement("span",null,n.createElement(h(),{component:"span",content:"transfer.available"}),":"," ",n.createElement("span",{className:s,style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._setTotal.bind(this,t,e[t],m.getAmount({real:!0}),m.asset_id)},n.createElement(Z.Z,{balance:e[t]})))}else y=n.createElement("span",null,n.createElement("span",{className:s},n.createElement(h(),{content:"transfer.errors.noFunds"})))}let k=e&&!o;const T=parseFloat(String.prototype.replace.call(u,/,/g,"")),x=T&&!(0,c.Z)(T),w=!t||!s||!x||!a||f||k||A||t.get("id")==s.get("id");let D=this.props.tabIndex;return this.state.open?n.createElement("div",{id:"send_modal_wrapper",className:_||!this.state.open?"hide":""},n.createElement(C.Modal,{visible:this.state.isModalVisible,id:this.props.id,overlay:!0,onCancel:this.hideModal,footer:[n.createElement(C.Button,{key:"send",disabled:w,onClick:w?null:this.onSubmit.bind(this)},e?l().translate("propose"):l().translate("transfer.send")),n.createElement(C.Button,{key:"Cancel",tabIndex:D++,onClick:this.onClose},n.createElement(h(),{component:"span",content:"transfer.cancel"}))]},n.createElement("div",{className:"grid-block vertical no-overflow"},n.createElement("div",{className:"content-block",style:{textAlign:"center",fontSize:"18px"}},n.createElement(h(),{content:"listing.modal.header2",wallet_name:(0,P.w)()}),this.props.ticker),this.state.open?n.createElement(C.Form,{className:"full-width-wrapper",layout:"vertical"},n.createElement(I,{label:"transfer.from",accountName:v,account:t,onChange:this.fromChanged.bind(this),onAccountChanged:this.onFromAccountChanged.bind(this),typeahead:!0,tabIndex:D++,locked:!0,noForm:!0}),n.createElement(I,{label:"transfer.to",accountName:p,account:s,onChange:this.toChanged.bind(this),onAccountChanged:this.onToAccountChanged.bind(this),typeahead:!0,tabIndex:D++,locked:!0,noForm:!0}),n.createElement(g.Z,{label:"transfer.amount",amount:u,onChange:this.onAmountChanged.bind(this),asset:S.length>0&&a?a.get("id"):r||S[0],display_balance:y,tabIndex:D++,allowNaN:!0,locked:!0}),n.createElement(N.Z,{account:t,transaction:{type:"transfer",options:["price_per_kbyte"],data:{type:"memo",content:b}},onChange:this.onFeeChanged.bind(this),tabIndex:D++})):null))):null}}class L extends n.Component{render(){return n.createElement(M,D({},this.props,{ref:this.props.refCallback}))}}const R=L=(0,p.$)(L,{listenTo:()=>[d.Z],getProps:e=>({currentAccount:d.Z.getState().currentAccount,passwordAccount:d.Z.getState().passwordAccount,tabIndex:e.tabIndex||0})});var q=s(39014);class F extends n.Component{constructor(e){super(e),this.props.coin.votes=0}triggerSend(e){this.setState({send_asset:e},(()=>{this.send_modal&&this.send_modal.show()}))}render(){try{this.props.account.get("name")}catch(e){}let{coin:e}=this.props;return n.createElement("div",{className:"listingTable__row"},n.createElement(R,{id:"send_modal_listing",refCallback:e=>{e&&(this.send_modal=e)},from_name:this.props.currentAccount?this.props.currentAccount:this.props.account,to_name:e.account?e.account:"",asset_id:"1.3.2",ticker:e.ticker}),n.createElement("div",{className:"listingAsset"},n.createElement("div",{className:"listingAssetCard"},n.createElement("div",{className:"listingTable__cell listingTableRank align-center"},this.props.rank),n.createElement("div",{className:"listingTable__cell listingTableLogo"},n.createElement("img",{className:"align-center",style:{maxWidth:40},src:`coins-logo/${e.ticker.toLowerCase()}.png`,alt:""})),n.createElement("div",{className:"listingTable__cell listingTableAssetName align-left nowrap"},e.name," (",e.ticker,")",!0===e.soon?n.createElement(h(),{content:"listing.table.coming_soon",style:{float:"right",color:"gold"}}):""),n.createElement("div",{className:"listingTable__cell listingTableLogo"},n.createElement(h(),{href:e.page,content:"listing.goto",component:"a",target:"_blank"}))),n.createElement("div",{className:"listingAssetInfo"},n.createElement("div",{className:"listingAssetInfoData"},n.createElement("div",{className:"listingTable__cell listingTableGoal"},n.createElement("div",{className:"listingAssetInfoBlock"},n.createElement(h(),{content:"listing.table.goal"}),": "," "),e.goal),e.listed?"":n.createElement("div",{className:"listingTable__cell listingTableVotes"},n.createElement("div",{className:"listingAssetInfoBlock"},n.createElement(h(),{content:"listing.table.donates"}),": "),e.votes,!0===e.soon?n.createElement(C.Button,{className:"coin-soon",disabled:!0},n.createElement(f.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"})):n.createElement(C.Button,{title:l().translate("listing.modal.header2"),onClick:this.triggerSend.bind(this,"1.3.2",e)},n.createElement(f.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"}))),n.createElement("div",{className:"listingTable__cell listingTableStatus"},n.createElement("div",{className:"listingAssetInfoBlock"},n.createElement(h(),{content:"listing.table.status"}),": "," "),n.createElement(h(),{content:"listing.table."+e.status}))),e.listed?"":n.createElement("div",{className:"listingTable__cell listingTableProgress"},n.createElement(o,{votes:e.votes_for_percent,goal:e.goal})))))}}const O=F=(0,p.$)(F,{listenTo:()=>[q.Z,d.Z],getProps:()=>({settings:q.Z.getState().settings,currentAccount:d.Z.getState().currentAccount||d.Z.getState().passwordAccount})});var U=s(34091),$=s(3894),B=s(73727),W=s(774),z=s(52531);class j extends n.Component{constructor(e){super(e),this.state={ListingNotice1Informed:!1,coins:[],updating:!0,currentLocale:this.props.currentLocale},this.data={links:{agreement_ru:"https://rudex.freshdesk.com/support/solutions/articles/35000138247-cоглашение-об-оказании-услуг-шлюза",agreement_en:"https://rudex.freshdesk.com/support/solutions/articles/35000138245-gateway-service-agreement"},donateTokenName:"DONATE",donateMarket:"DONATE_RUDEX.USDT"}}UNSAFE_componentWillReceiveProps(e){e.currentLocale!==this.state.currentLocale&&this.setState({currentLocale:e.currentLocale})}onSubmitRequest(e){e.preventDefault(),this.setState({error:null}),window.open("ru"==this.state.currentLocale?"https://docs.google.com/forms/d/1lJnvufc95CDh2z1Ntq7iCSEs3oD7tPG4nljKTYYezQw":"https://docs.google.com/forms/d/1X2PguAaRzxlXZGLAarGcmNd-LbJCy8lcoMBcQjFSQ5k","_blank")}onListingNotice1Informed(){this.setState({ListingNotice1Informed:!this.state.ListingNotice1Informed})}componentDidMount(){setInterval((()=>this._getBalances()),1e3)}shouldComponentUpdate(e,t){return 0==t.updating}_getBalances(){let e=(0,P.aV)();0!==this.state.coins.length&&(e=this.state.coins),this.setState({coins:e,updating:!0}),e.forEach((e=>{(0,i.FetchChain)("getAsset",this.data.donateTokenName).then((t=>{a.Apis.instance().db_api().exec("get_named_account_balances",[e.account,[t.get("id")]]).then((s=>{let n=this.state.coins;n.find((t=>t.account===e.account)).votes=s[0].amount/Math.pow(10,t.get("precision")),this.setState({coins:n})})).then((()=>{this.setState({updating:!1})}))}))}))}render(){return n.createElement("div",{className:"grid-block vertical"},!0===this.state.updating?n.createElement(z.Z,{loadingText:l().translate("footer.loading")}):this.getTableTabs())}getContent(){return n.createElement("div",{className:"listingTable"},n.createElement("p",null,n.createElement(B.rU,{style:{margin:2,fontSize:"1.0rem"},to:`/market/${this.data.donateMarket}`},n.createElement(h(),{content:"listing.get_donate_tokens"}),n.createElement("span",{style:{margin:2,fontSize:"1.0rem"}},n.createElement($.Z,{maxWidth:25,replaceNoneToBts:!1,name:this.data.donateTokenName}),this.data.donateTokenName),n.createElement(h(),{content:"listing.token"}))),n.createElement("div",{className:"listingTable__header"},n.createElement("div",{className:"listingAssetCard"},n.createElement("div",{className:"listingTable__cell listingTableRank"},n.createElement(h(),{content:"listing.table.rank"})),n.createElement("div",{className:"listingTable__cell listingTableLogo"}),n.createElement("div",{className:"listingTable__cell listingTableAssetName align-left"},n.createElement(h(),{content:"listing.table.asset_name"}))),n.createElement("div",{className:"listingAssetInfo"},n.createElement("div",{className:"listingAssetInfoData"},n.createElement("div",{className:"listingTable__cell listingTableVotes"},n.createElement(h(),{content:"listing.table.goal"})),n.createElement("div",{className:"listingTable__cell listingTableGoal"},n.createElement(h(),{content:"listing.table.donates"})),n.createElement("div",{className:"listingTable__cell listingTableStatus"},n.createElement(h(),{content:"listing.table.status"}))),n.createElement("div",{className:"listingTable__cell listingTableProgress"},n.createElement(h(),{content:"listing.table.progress"})))),this.getCoinsList())}getContent_listed=()=>n.createElement("div",{className:"listingTable"},n.createElement("div",{className:"listingTable__header"},n.createElement("div",{className:"listingAssetCard"},n.createElement("div",{className:"listingTable__cell listingTableRank"},n.createElement(h(),{content:"listing.table.rank"})),n.createElement("div",{className:"listingTable__cell listingTableLogo"}),n.createElement("div",{className:"listingTable__cell listingTableAssetName align-left"},n.createElement(h(),{content:"listing.table.asset_name"}))),n.createElement("div",{className:"listingAssetInfo"},n.createElement("div",{className:"listingAssetInfoData"},n.createElement("div",{className:"listingTable__cell listingTableVotes"},n.createElement(h(),{content:"listing.table.goal"})),n.createElement("div",{className:"listingTable__cell listingTableStatus"},n.createElement(h(),{content:"listing.table.status"}))))),this.getCoinsList_listed());getCoinsList=()=>{let{coins:e}=this.state;return e.sort(((e,t)=>t.votes-e.votes)).map(((e,t)=>(e.votes_for_percent=e.votes<e.goal?e.votes:e.goal,e.status=e.votes<e.goal?"collecting":"done",1==e.soon?e.status="waiting":e.soon,n.createElement(O,{key:t,rank:t+1,coin:e}))))};getCoinsList_listed=()=>(0,P.cY)().sort(((e,t)=>t.votes-e.votes)).map(((e,t)=>(e.votes_for_percent=e.votes<e.goal?e.votes:e.goal,e.status="done",e.listed=!0,n.createElement(O,{key:t,rank:t+1,coin:e}))));getTableTabs=()=>{let e=n.createElement("span",{style:{fontWeight:"bold"}},"RuDEX"),t=(e={margin:2,fontSize:"1.0rem",paddingRight:5})=>n.createElement(B.rU,{style:e,to:`/asset/${this.data.donateTokenName}`},n.createElement($.Z,{maxWidth:25,replaceNoneToBts:!1,name:this.data.donateTokenName}),this.data.donateTokenName);return n.createElement("div",{className:"grid-content"},n.createElement("div",{className:"content-block small-12"},n.createElement("div",{className:"tabs-container generic-bordered-box"},n.createElement(U.m,{defaultActiveTab:0,segmented:!1,setting:"permissionsTab",className:"account-tabs",tabsClass:"account-overview bordered-header content-block",contentClass:"padding"},n.createElement(U.O,{title:"listing.donate_progress"},n.createElement("label",{className:"horizontal",tabIndex:0},n.createElement("div",{className:"grid-container",style:{padding:"2rem 8px"}},n.createElement("div",{style:{marginBottom:20}}),n.createElement("div",{className:"grid-block small-up-1 medium-up-1 large-up-1 no-overflow"},this.getContent()))),n.createElement("br",null)),n.createElement(U.O,{title:"listing.listed"},n.createElement("label",{className:"horizontal",tabIndex:1},n.createElement("div",{className:"grid-container",style:{padding:"2rem 8px"}},n.createElement("div",{style:{marginBottom:20}}),n.createElement("div",{className:"grid-block small-up-1 medium-up-1 large-up-1 no-overflow"},this.getContent_listed()))),n.createElement("br",null)),n.createElement(U.O,{title:"listing.add_coin"},n.createElement("label",{className:"horizontal",tabIndex:2}),n.createElement("div",{className:"grid-container help-content-layout"},n.createElement("div",{className:"main-content"},n.createElement("h2",null,n.createElement(h(),{content:"listing.texts.header"})),n.createElement("p",{style:{fontSize:"20px"}},n.createElement(h(),{content:"listing.texts.text1"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.text2"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.text3.t1"}),n.createElement(h(),{content:"listing.texts.text3.t2"}),n.createElement(B.rU,{style:{margin:2,fontSize:"1.0rem"},to:`/market/${this.data.donateMarket}`},n.createElement(h(),{content:"listing.texts.text3.get"})),n.createElement(h(),{content:"listing.texts.text4.t1"}),t(),".",n.createElement(h(),{content:"listing.texts.text4.t2"}),t(),n.createElement(h(),{content:"listing.texts.text4.t3"}),n.createElement("span",{style:{border:"1px solid #00a9e0",padding:"4px 3px 3px 4px",borderRadius:"3px",cursor:"pointer"}},this.data.donateTokenName),n.createElement(C.Button,{className:"buttonDonate"},n.createElement(f.Z,{style:{margin:"-3px 0 0px 0px"},name:"donate",title:"listing.modal.header2",className:"icon-14x"})),n.createElement(h(),{content:"listing.texts.text4.t4"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.text5.t1"}),t(),n.createElement(h(),{content:"listing.texts.text5.t2"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.text5.t3"})),n.createElement("p",{style:{fontWeight:"bold"}},n.createElement(h(),{content:"listing.texts.terms.t1"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.t2"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.tu1"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.tu2"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.tu3"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.tu4"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.tu5"})),n.createElement("p",null,n.createElement(h(),{content:"listing.texts.terms.t3"})),n.createElement("h3",null,n.createElement(h(),{content:"listing.texts.rules.header"})),n.createElement("ol",null,n.createElement("li",null,n.createElement(h(),{content:"listing.texts.rules.rule_1"}),n.createElement(h(),{href:"ru"==this.state.currentLocale?this.data.links.agreement_ru:this.data.links.agreement_en,content:"listing.texts.rules.rule_10",component:"a",target:"_blank"}),n.createElement(h(),{content:"listing.texts.rules.rule_11"})),n.createElement("li",null,n.createElement(h(),{content:"listing.texts.rules.rule_2"})),n.createElement("li",null,n.createElement(h(),{content:"listing.texts.rules.rule_3"}),t(),n.createElement(h(),{content:"listing.texts.rules.rule_4"})),n.createElement("li",null,n.createElement(h(),{content:"listing.texts.rules.rule_5"})))),n.createElement("h5",null,n.createElement("input",{type:"checkbox",defaultChecked:this.state.ListingNotice1Informed,onChange:this.onListingNotice1Informed.bind(this)})," ","-"," ",n.createElement(h(),{content:"listing.notice_informed"})),n.createElement("div",{className:"listing_button"},n.createElement(C.Button,{key:"send",disabled:!this.state.ListingNotice1Informed,onClick:this.state.ListingNotice1Informed?this.onSubmitRequest.bind(this):null},n.createElement(h(),{content:"listing.submit_request"}))),n.createElement("h3",null,n.createElement(h(),{content:"listing.texts.end"})," ",e,"!")))))))}}const V=j=(0,p.$)(j,{listenTo:()=>[W.Z],getProps:()=>({currentLocale:W.Z.getState().currentLocale})})},76285:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var n=s(67294),a=s(65601),i=s(99111),r=s(94672),l=s(89449),o=s(89233),c=s(12326),m=s(76660),u=s(58074),h=s.n(u),d=s(45697),p=s.n(d),g=s(98485),v=s(112),b=s.n(v),A=s(43393);function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_.apply(this,arguments)}class E extends n.Component{static propTypes={chains:p().array,placeholder:p().string,style:p().object,selectStyle:p().object};static defaultProps={chains:["Graphene Blockchain"],placeholder:null,style:{},selectStyle:{}};render(){let{chains:e,selectStyle:t,style:s,placeholder:a,value:i,onDropdownVisibleChange:r,...l}=this.props;const o=e.filter(A.Map.isMap).length<=1&&!r;i||(i=e[0]);const c=n.createElement(m.Select,_({onDropdownVisibleChange:r,showArrow:!o&&void 0,style:t,placeholder:n.createElement(h(),{content:a||"utility.asset_select_placeholder"}),value:i},l,{optionFilterProp:"children",filterOption:(e,t)=>t.key.toLowerCase().indexOf(e.toLowerCase())>=0,disabled:o,notFoundContent:b().translate("global.not_found")}),e.filter(A.Map.isMap).map((e=>n.createElement(m.Select.Option,{key:e,value:e},e))));return n.createElement("div",{className:"chain-select",style:s},c)}}const f=E;class S extends n.Component{static propTypes={label:p().string,assetInput:p().string,asset:p().string,assets:p().array,amount:p().string,disabled:p().bool,onAssetInputChange:p().func,onAmountChange:p().func,onImageError:p().func,onSearch:p().func,imgName:p().string,placeholderAmount:p().string,placeholder:p().string};static defaultProps={disabled:!1,imgName:"unknown",placeholderAmount:"0.0",placeholder:""};constructor(e){super(e),this.state={imageError:!1}}componentDidUpdate(e,t){this.props.imgName&&this.props.imgName!==e.imgName&&"unknown"!==this.props.imgName&&this.setState({imageError:!1})}onImageError(){this.setState({imageError:!0})}render(){let{label:e,assetInput:t,asset:s,assets:a,amount:i,onAssetInputChange:r,onSearch:l,onAmountChange:o,imgName:c,placeholder:u,placeholderAmount:d,tooltipText:p}=this.props;this.state.imageError&&(c="unknown");const v=n.createElement(h(),{className:"left-label",component:"label",content:e,style:{fontSize:"1.2rem",margin:"0",padding:"0"}}),b=n.createElement(f,null),A=n.createElement("img",{style:{width:"3.5rem",height:"3.5rem",marginTop:"0.5rem"},onError:this.onImageError.bind(this),src:`asset-symbols/${c.toLowerCase()}.png`}),_=n.createElement(g.Z,{onChange:o,amount:i,asset:s,assets:a,placeholder:d,onSearch:l});return n.createElement("div",{className:"amount-selector-2",style:{minWidth:"3.5rem",width:"100%"}},v,n.createElement(m.Row,{style:{minWidth:"18rem"}},n.createElement(m.Col,{style:{minWidth:"3.5rem"},span:5},A),n.createElement(m.Col,{span:19},n.createElement(m.Tooltip,{placement:"top",title:p},b),_)))}}const y=S;var k=s(91684);class T extends n.Component{static propTypes={sellAssetInput:p().string,sellAsset:p().string,sellAssets:p().array,sellAmount:p().string,sellImgName:p().string,receiveAssetInput:p().string,receiveAsset:p().string,receiveAssets:p().array,receiveAmount:p().string,receiveImgName:p().string,onSellAssetInputChange:p().func.isRequired,onSellAmountChange:p().func.isRequired,onReceiveAssetInputChange:p().func.isRequired,onReceiveAmountChange:p().func.isRequired,onSwap:p().func.isRequired,isSwappable:p().bool};render(){const e=window.innerWidth<850,{sellAssetInput:t,sellAsset:s,sellAssets:a,sellAmount:i,sellImgName:r,receiveAssetInput:l,receiveAsset:o,receiveAssets:c,receiveAmount:u,receiveImgName:h,onSellAssetInputChange:d,onSellAmountChange:p,onReceiveAssetInputChange:g,onReceiveAmountChange:v,onReceiveAssetSearch:b,onSwap:A,isSwappable:_}=this.props,E=n.createElement(y,{label:"exchange.sell",assetInput:t,asset:s,assets:a,amount:i,onAssetInputChange:d,onAmountChange:p,imgName:r,placeholder:"exchange.quick_trade_details.placeholder_sell"}),f=n.createElement(y,{label:"exchange.receive",assetInput:l,asset:o,assets:c,amount:u,onAssetInputChange:g,onSearch:b,onAmountChange:v,imgName:h,placeholder:"exchange.quick_trade_details.placeholder_receive"}),S={align:"center",display:"flex",justifyContent:"center"};_||(S.opacity=.1);const T=n.createElement("div",{style:S},n.createElement(k.Z,{name:"swap",size:"2x",style:e?null:{marginTop:"3rem"},onClick:A}));return n.createElement("div",null,e?n.createElement("div",null,n.createElement(m.Row,null,E),n.createElement(m.Row,null,T),n.createElement(m.Row,null,f)):n.createElement(m.Row,null,n.createElement(m.Col,{span:10},E),n.createElement(m.Col,{span:4},T),n.createElement(m.Col,{span:10},f)))}}const x=T;var C=s(22463),w=s(13973),I=s(30806),N=s(81237);function Z(e,t,s){const n=[];let a;t.sort(((e,t)=>t.getPrice()-e.getPrice()));for(let i=0;i<t.length;i++)if(n.length){if(n.forEach((({order:e})=>{a="receive"===s?e.total_for_sale.getAmount():e.total_to_receive.getAmount()})),a>=e)break;n.push({order:t[i],amount:t[i].amountToReceive().amount,total_amount:t[i].total_to_receive.amount,price:t[i].getPrice()})}else n.push({order:t[i],amount:t[i].amountToReceive().amount,total_amount:t[i].total_to_receive.amount,price:t[i].getPrice()});return n}function P(e){let t=[];if(!e||!e.get("balances"))return t;let s=e.get("balances").toJS();t=Object.keys(s).sort(w.Z.sortID);for(let e in s){let n=I.ChainStore.getObject(s[e]);n&&0===n.get("balance")&&t.splice(t.indexOf(e),1)}return t}var D=s(7453),M=s(26048),L=s(3841),R=s(74366),q=s(33951),F=s(99349);class O extends n.Component{constructor(e){super(e);const t=P(e.currentAccount);this.state={mounted:!1,sub:"",sellAssetInput:"",sellAsset:null,sellAssets:t,sellAmount:"",sellImgName:"unknown",receiveAssetInput:"",receiveAsset:null,receiveAssets:t,receiveAmount:"",receiveImgName:"unknown",activeInput:"",activeAmountInput:"",lookupQuote:"",orders:[],orderView:"amount",fees:null,prices:null,isSubscribedToMarket:!0},this.onSellAssetInputChange=this.onSellAssetInputChange.bind(this),this.onReceiveAssetInputChange=this.onReceiveAssetInputChange.bind(this),this.onSellAmountChange=this.onSellAmountChange.bind(this),this.onReceiveAmountChange=this.onReceiveAmountChange.bind(this),this.onSellImageError=this.onSellImageError.bind(this),this.onReceiveImageError=this.onReceiveImageError.bind(this),this.onReceiveAssetSearch=this.onReceiveAssetSearch.bind(this),this.onSwap=this.onSwap.bind(this),this.handleSubscriptionToggleChange=this.handleSubscriptionToggleChange.bind(this),this.hendleOrderView=this.hendleOrderView.bind(this),this.handleSell=this.handleSell.bind(this),this._subToMarket=this._subToMarket.bind(this),this._checkAndUpdateMarketList=this._checkAndUpdateMarketList.bind(this),this.getAssetList=(0,i.Z)(D.Z.getAssetList.defer,150)}static getDerivedStateFromProps(e,t){let s={};return e.assetToSell&&(s={sellAssetInput:e.assetToSell.get("id"),sellAsset:e.assetToSell,sellImgName:e.assetToSell.get("symbol")}),e.assetToReceive&&(s={...s,receiveAssetInput:e.assetToReceive.get("id"),receiveAsset:e.assetToReceive,receiveImgName:e.assetToReceive.get("symbol")}),s}_routeTo(e,t){let s=e,n=t;e||(s=""),t||(n="");let a="/instant-trade/"+s+"_"+n;this.props.location.pathname!==a&&this.props.history.push(a)}_areEqualAssets(e,t){return this._isLoadedAsset(e)&&this._isLoadedAsset(t)&&e.get("id")===t.get("id")}_isLoadedAsset(e){return!!e&&!!e.toJS}_areAssetsGiven(){return this._isLoadedAsset(this.props.assetToSell)&&this._isLoadedAsset(this.props.assetToReceive)}_haveAssetsChanged(e){return this._isLoadedAsset(this.props.assetToSell)!==this._isLoadedAsset(e.assetToSell)||this._isLoadedAsset(this.props.assetToReceive)!==this._isLoadedAsset(e.assetToReceive)||!this._areEqualAssets(this.props.assetToSell,e.assetToSell)||!this._areEqualAssets(this.props.assetToReceive,e.assetToReceive)}_hasMarketChanged(e){return JSON.stringify(e.marketData)!==JSON.stringify(this.props.marketData)}componentDidUpdate(e){if(this._haveAssetsChanged(e)?this._assetsHaveChanged():this._hasMarketChanged(e)&&this._getOrders(),this.props.searchAssets!==e.searchAssets){this.setState({activeSearch:!0});let e=this.props.searchAssets.toArray().filter((e=>-1!==e.symbol.indexOf(this.state.lookupQuote)));this._checkAndUpdateMarketList(e)}if(this.props.currentAccount!==e.currentAccount){const e=P(this.props.currentAccount);this.setState({sellAssets:e,receiveAssets:e})}}componentDidMount(){this.setState({mounted:!0}),this._areAssetsGiven()&&this._assetsHaveChanged()}componentWillUnmount(){const{sub:e}=this.state,{sellAssetId:t,receiveAssetId:s}=this.getAssetsDetails();e&&C.Z.unSubscribeMarket(t,s)}async _subToMarket(){const{receiveAsset:e,sellAsset:t,sub:s}=this.state;if(e&&t){const{receiveAssetId:n,sellAssetId:a}=this.getAssetsDetails(),{bucketSize:i,currentGroupOrderLimit:r}=this.props;if(s){let[e,t]=s.split("_");if(e===a&&t===n)return;await C.Z.unSubscribeMarket(e,t)}await C.Z.subscribeMarket(e,t,3600,0),this.setState({sub:`${a}_${n}`},(()=>{this.getAllPrices(),this.getAllFees()}))}}async getAllFees(){const{currentAccount:e}=this.props,{sellAsset:t,receiveAsset:s}=this.state;if(t&&s){const n=await async function(e,t,s){return{marketFee:{baseMarketFeePercent:e.getIn(["options","market_fee_percent"])/100+"%",quoteMarketFeePercent:t.getIn(["options","market_fee_percent"])/100+"%",baseMarketFee:e.getIn(["options","market_fee_percent"]),quoteMarketFee:t.getIn(["options","market_fee_percent"])},transactionFee:await async function(e=[],t){let s={},n=[];return e.forEach((e=>{n.push((0,N.rX)({accountID:t.get("id"),feeID:e.get("id"),type:"limit_order_create"}))})),Promise.all(n).then((t=>(e.forEach(((e,n)=>{s[e.get("id")]=t[n]})),s))).catch((e=>(console.error("checkFeeStatusAsync error",e),s)))}([e,t],s)}}(s,t,e);this.setState({fees:n})}}getAssetsDetails(){const{sellAsset:e,receiveAsset:t}=this.state;return{sellAssetId:e?e.get("id"):null,receiveAssetId:t?t.get("id"):null,sellAssetPrecision:e?e.get("precision"):null,receiveAssetPrecision:t?t.get("precision"):null,sellAssetSymbol:e?e.get("symbol"):null,receiveAssetSymbol:t?t.get("symbol"):null}}getAllPrices(){const{activeMarketHistory:e,feedPrice:t}=this.props,s=function(e,t){let s;return e.size&&(s=e.take(2).first().getPrice()),{latestPrice:s||null,feedPrice:t?t.toReal():t}}(e,t);this.setState({prices:s})}_getOrders(){if(!this.state.isSubscribedToMarket)return void console.log(this.props.marketData);const{combinedBids:e}=this.props.marketData,{sellAsset:t,receiveAsset:s,sellAmount:n,receiveAmount:a,activeInput:i}=this.state,{sellAssetPrecision:r,receiveAssetPrecision:l}=this.getAssetsDetails();if(e&&e.length&&t&&s)switch(i){case"receiveAsset":if(n){const t=Z(n*10**r,e,"sell");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateReceiveAmount()))}break;case"sellAsset":if(a){const t=Z(a*10**l,e,"receive");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateSellAmount()))}break;case"sell":if(n){const t=Z(n*10**r,e,"sell");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateReceiveAmount()))}else this.setState({orders:[],receiveAmount:""});break;case"receive":if(a){const t=Z(a*10**l,e,"receive");this.setState({orders:t,ordersUpdated:new Date},(()=>this.updateSellAmount()))}else this.setState({orders:[],sellAmount:""})}}_assetsHaveChanged(){this._subToMarket()}async _setSellAsset(e,t="sellAsset",s=!0){let n=null;n="string"==typeof e?await(0,I.FetchChain)("getAsset",e):e,this.setState({activeInput:t},(()=>{this._routeTo(n.get("symbol"),this.props.assetToReceive?this.props.assetToReceive.get("symbol"):"")}))}async _setReceiveAsset(e,t="receiveAsset",s=!0){let n=null;n="string"==typeof e?await(0,I.FetchChain)("getAsset",e):e,this.setState({activeInput:t},(()=>{this._routeTo(this.props.assetToSell?this.props.assetToSell.get("symbol"):"",n.get("symbol"))}))}async _swapAssets(e,t=!0){this.setState({sellAmount:"sellAsset"===e?"":this.state.receiveAmount,receiveAmount:"receiveAsset"===e?"":this.state.sellAmount,activeInput:e},(()=>{this._routeTo(this.state.receiveAsset.get("symbol"),this.state.sellAsset.get("symbol"))}))}async onSellAssetInputChange(e){const{receiveAssetId:t}=this.getAssetsDetails();e===t?this._swapAssets("sellAsset"):this._setSellAsset(e)}async onReceiveAssetInputChange(e){const{sellAssetId:t}=this.getAssetsDetails();e===t?this._swapAssets("receiveAsset"):this._setReceiveAsset(e)}onReceiveAssetSearch(e){this.state.mounted&&(I.ChainValidation.is_valid_symbol_error(e,!0)?this.setState({receiveAsset:null,receiveAssetInput:e,activeSearch:!1}):(this.state.receiveAssetInput!==e&&this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{(0,M.gr)(e,!0,this.getAssetList,this.setState)}),100)))}_checkAndUpdateMarketList(e){let t=e.map((e=>e.id));clearInterval(this.intervalId);const{receiveAssetInput:s}=this.state;let n="";if(I.ChainStore.getAsset(s)){const e=I.ChainStore.getAsset(s).get("id");t.includes(e)&&(n=I.ChainStore.getAsset(s).get("id"))}if(1===t.length){n=t[0];const{currentAccount:e}=this.props;t=P(e),t.push(n)}if(0===t.length){const{currentAccount:e}=this.props;t=P(e)}this.intervalId=setInterval((()=>{clearInterval(this.intervalId),this.setState({receiveAssets:t,activeSearch:!1},(()=>{this._subToMarket()}))}),100)}onSellAmountChange(e){this.state.mounted&&(e.asset!==this.state.sellAssetInput&&this.onSellAssetInputChange(e.asset),this.setState({sellAmount:e.amount,activeInput:"sell",activeAmountInput:"sell"},(()=>{this._getOrders()})))}onReceiveAmountChange(e){this.state.mounted&&(e.asset!==this.state.receiveAssetInput&&this.onReceiveAssetInputChange(e.asset),this.setState({receiveAmount:e.amount,activeInput:"receive",activeAmountInput:"receive"},(()=>{this._getOrders()})))}onSellImageError(){this.setState({sellImgName:"unknown"})}onReceiveImageError(){this.setState({receiveImgName:"unknown"})}onSwap(){this.isSwappable()&&this._swapAssets("neither")}handleSubscriptionToggleChange(){this.setState((e=>({isSubscribedToMarket:!e.isSubscribedToMarket})))}hendleOrderView(){this.setState((e=>({orderView:"amount"===e.orderView?"total":"amount"})))}handleSell(){const{currentAccount:e}=this.props,{sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:n,receiveAssetId:a,sellAssetPrecision:i,receiveAssetPrecision:r}=this.getAssetsDetails(),l=new R.xR({asset_id:n,precision:i,amount:t*10**i}),o=new R.xR({asset_id:a,precision:r,amount:s*10**r}),c=new Date(Date.now()+31536e6),u=new R.F6({for_sale:l,expiration:c,to_receive:o,seller:e.get("id"),fee:{asset_id:"1.3.0",amount:0},fill_or_kill:!0});return C.Z.createLimitOrder2(u).then((e=>{e.error&&"wallet locked"!==e.error.message&&m.Notification.error({message:b().translate("notifications.exchange_unknown_error_place_order",{amount:s,symbol:a})})})).catch((e=>{console.error("order failed:",e)}))}updateSellAmount(){const{orders:e,receiveAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:n}=this.getAssetsDetails();if(1!==e.length){if(e.length>1){const a=e.slice(-1)[0],i=e.slice(e.length-2,e.length-1)[0],r=(t*10**n-i.order.total_for_sale.getAmount())/a.order.getPrice()*10**s/10**n,l=((i.order.total_to_receive.getAmount()+r)/10**s).toFixed(s);this.setState({sellAmount:l})}}else{const n=(t/e[0].order.getPrice()).toFixed(s);this.setState({sellAmount:n})}}updateReceiveAmount(){const{orders:e,sellAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:n}=this.getAssetsDetails();if(1!==e.length){if(e.length>1){const a=e.slice(-1)[0],i=e.slice(e.length-2,e.length-1)[0],r=(t*10**s-i.order.total_to_receive.getAmount())*a.order.getPrice()*10**n/10**s,l=((i.order.total_for_sale.getAmount()+r)/10**n).toFixed(n);this.setState({receiveAmount:l})}}else{const s=(e[0].order.getPrice()*t).toFixed(n);this.setState({receiveAmount:s})}}isSwappable(){return this._areAssetsGiven()}_getTransactionFee(e){const{fees:t,prices:s}=this.state,{sellAssetId:n}=this.getAssetsDetails();return t&&t.transactionFee[n]?e&&e!==n?t.transactionFee[n].fee.amount/10**t.transactionFee[n].fee.precision*s.latestPrice:t.transactionFee[n].fee.amount/10**t.transactionFee[n].fee.precision:0}_getMarketFee(e){const{fees:t,prices:s,receiveAmount:n}=this.state,{receiveAssetId:a}=this.getAssetsDetails();return t?e&&e!==a?t.marketFee.baseMarketFee*n/s.latestPrice/1e4:t.marketFee.baseMarketFee*n/1e4:0}_getFeePercent(e,t){return+t?(+t+ +e)/t-1:0}getDetails(){const{sub:e}=this.state;if(!e)return;const{sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:a,receiveAssetId:i,sellAssetPrecision:r,receiveAssetPrecision:l,receiveAssetSymbol:o}=this.getAssetsDetails(),c=this.getPriceSection(),u=n.createElement(n.Fragment,null,b().translate("exchange.quick_trade_details.effective")," ",n.createElement(q.Z,{base_asset:a,quote_asset:i,base_amount:t*10**r,quote_amount:s*10**l,noPopOver:!0,force_direction:o,noInvertTip:!0})),h=this.getFeeSection(),d=this.getOrdersSection(),p=b().translate("exchange.quick_trade_details.effective")+" "+(100*this.getTotalPercentFee()).toFixed(2),g=this.state.orders.length,v=g<2?b().translate("exchange.quick_trade_details.order"):b().translate("exchange.quick_trade_details.orders");return n.createElement(m.Collapse,{className:"asset-collapse",style:{marginTop:"1rem"}},n.createElement(m.Collapse.Panel,{header:b().translate("exchange.price"),extra:u},c),n.createElement(m.Collapse.Panel,{header:b().translate("exchange.fee"),extra:`${p}%`},h),n.createElement(m.Collapse.Panel,{header:b().translate("exchange.orders"),extra:g?`${g} ${v}`:"no orders"},d))}showDetails(){const{sellAsset:e,receiveAsset:t,sellAmount:s,receiveAmount:n}=this.state;return e&&t&&+s&&+n}showFeedPrice(){const{sellAsset:e,receiveAsset:t}=this.state,{sellAssetId:s,receiveAssetId:n}=this.getAssetsDetails(),a=t.getIn(["bitasset","options","short_backing_asset"]),i=e.getIn(["bitasset","options","short_backing_asset"]);return a===s||i===n}getPriceSection(){const{prices:e,sellAmount:t,receiveAmount:s}=this.state,{sellAssetId:a,receiveAssetId:i,sellAssetPrecision:r,receiveAssetPrecision:l,receiveAssetSymbol:o}=this.getAssetsDetails();return n.createElement(m.Row,null,n.createElement(m.Col,{span:12},n.createElement("div",null,b().translate("exchange.quick_trade_details.your_price")),this.showFeedPrice()&&n.createElement("div",null,b().translate("exchange.quick_trade_details.feed_price")),n.createElement("div",null,b().translate("exchange.quick_trade_details.last_price"))),n.createElement(m.Col,{span:12,style:{textAlign:"right"}},n.createElement("div",null,n.createElement(q.Z,{base_asset:a,quote_asset:i,base_amount:t*10**r,quote_amount:s*10**l,noPopOver:!0,force_direction:o,noInvertTip:!0})),this.showFeedPrice()&&n.createElement("div",null,n.createElement(q.Z,{base_asset:a,quote_asset:i,base_amount:1*10**r,quote_amount:e.feedPrice*10**l,noPopOver:!0,force_direction:o,noInvertTip:!0})),n.createElement("div",null,n.createElement(q.Z,{base_asset:a,quote_asset:i,base_amount:1*10**r,quote_amount:e.latestPrice*10**l,noPopOver:!0,force_direction:o,noInvertTip:!0}))))}getFeeSection(){const{sellAmount:e,receiveAmount:t}=this.state,{sellAssetPrecision:s,receiveAssetPrecision:a,sellAssetSymbol:i,receiveAssetSymbol:r}=this.getAssetsDetails(),l=this._getTransactionFee().toFixed(s),o=(100*this._getFeePercent(this._getTransactionFee(),e)).toFixed(2),c=this._getMarketFee().toFixed(a),u=(100*this._getFeePercent(this._getMarketFee(),t)).toFixed(2);let[h,d]=this.getLiquidityPenalty();h=h||0===h?(100*h).toFixed(2)+"%":"-",d=d||0===d?(100*d).toFixed(2)+"%":"-";const p=this.showFeedPrice()?`${h} / ${d}`:h;return n.createElement(m.Row,null,n.createElement(m.Col,{span:12},n.createElement("div",null,b().translate("exchange.quick_trade_details.liquidity_penalty")),n.createElement("div",null,b().translate("exchange.quick_trade_details.market_fee"),` ${u}%`),n.createElement("div",null,b().translate("exchange.quick_trade_details.transaction_fee"),` ${o}%`)),n.createElement(m.Col,{span:12,style:{textAlign:"right"}},n.createElement("div",null,p),n.createElement("div",null,c," ",n.createElement(F.Z,{name:r,noTip:!0})),n.createElement("div",null,l," ",n.createElement(F.Z,{name:i,noTip:!0}))))}getOrdersSection(){const{orders:e,orderView:t}=this.state,{sellAssetId:s,receiveAssetId:a,sellAssetPrecision:i,sellAssetSymbol:r,receiveAssetSymbol:l}=this.getAssetsDetails(),o=e.map((e=>({key:e.order.id,id:e.order.id,seller:n.createElement(L.Z,{account:e.order.seller}),amount:n.createElement("div",{onClick:this.hendleOrderView},"amount"===t?e.amount/10**i:e.total_amount/10**i),price:e.price}))),c=n.createElement("span",null,"amount"===t?b().translate("exchange.quick_trade_details.amount"):b().translate("exchange.quick_trade_details.total")," (",n.createElement(F.Z,{name:r,noTip:!0}),")"),u=n.createElement("span",null,b().translate("exchange.quick_trade_details.price")," (",n.createElement(q.Z,{base_asset:s,quote_asset:a,noPopOver:!0,force_direction:l,noInvertTip:!0,hide_value:!0}),")"),d=[{title:b().translate("exchange.quick_trade_details.id"),dataIndex:"id",key:"id",width:"20%"},{title:b().translate("exchange.quick_trade_details.seller"),dataIndex:"seller",key:"seller",width:"20%"},{title:c,dataIndex:"amount",key:"amount",width:"30%"},{title:u,dataIndex:"price",key:"price"}];return n.createElement("div",null,n.createElement(m.Switch,{style:{marginLeft:"0px"},onChange:this.handleSubscriptionToggleChange,checked:this.state.isSubscribedToMarket}),this.state.ordersUpdated&&n.createElement("div",{style:{float:"right"}},b().localize(this.state.ordersUpdated)),n.createElement(h(),{onClick:this.handleSubscriptionToggleChange,content:"exchange.quick_trade_details.subscribe_to_market",style:{marginLeft:"10px",cursor:"pointer"}}),n.createElement(m.Table,{columns:d,dataSource:o,style:{width:"100%",marginTop:"10px"},pagination:o.length>5&&{pageSize:5}}))}getLiquidityPenalty(){const{prices:e,sellAmount:t,receiveAmount:s}=this.state,n=s/t,a=e.latestPrice,i=e.feedPrice;let r,l;return n&&a&&(r=Math.max(1-n/a,1-a/n)),n&&i&&(l=Math.max(1-n/i,1-i/n)),[r,l]}getTotalPercentFee(){const{sellAmount:e,receiveAmount:t}=this.state;return this._getFeePercent(this._getTransactionFee(),e)+this._getFeePercent(this._getMarketFee(),t)+this.getLiquidityPenalty()[0]}hasBalance(){const{sellAmount:e}=this.state,{currentAccount:t}=this.props,s=t.get("balances").toJS(),{sellAssetId:n,sellAssetPrecision:a}=this.getAssetsDetails();if(!s[n])return!1;const i=I.ChainStore.getObject(s[n]).get("balance");return e*10**a+this._getTransactionFee()*10**a<+i}render(){const{sellAssetInput:e,sellAssets:t,sellAmount:s,sellImgName:a,receiveAssetInput:i,receiveAssets:r,receiveAmount:l,receiveImgName:o,sub:c}=this.state,{sellAssetId:u,receiveAssetId:h}=this.getAssetsDetails(),d=this.showDetails()?this.getDetails():null;return n.createElement(m.Card,{className:"quick-trade",style:{align:"center",display:"flex",justifyContent:"center",minWidth:"300px",marginTop:"1rem"}},n.createElement(x,{sellAssetInput:e,sellAsset:u,sellAssets:t,sellAmount:s,sellImgName:a,onSellAssetInputChange:this.onSellAssetInputChange,onSellAmountChange:this.onSellAmountChange,receiveAssetInput:i,receiveAsset:h,receiveAssets:r,receiveAmount:l,receiveImgName:o,onReceiveAssetInputChange:this.onReceiveAssetInputChange,onReceiveAmountChange:this.onReceiveAmountChange,onReceiveAssetSearch:this.onReceiveAssetSearch,onSwap:this.onSwap,isSwappable:this.isSwappable()}),d,n.createElement("div",{style:{marginTop:"1rem",textAlign:"center"}},n.createElement(m.Tooltip,{title:this.hasBalance()?null:b().translate("exchange.no_balance")},n.createElement(m.Button,{key:"sell",type:"primary",disabled:!this.showDetails()||!c||!this.hasBalance(),onClick:this.handleSell},b().translate("exchange.sell")))))}}O=(0,l.$)(O,{listenTo:()=>[o.Z,c.Z],getProps:()=>({searchAssets:o.Z.getState().assets,assetsLoading:o.Z.getState().assetsLoading,marketData:c.Z.getState().marketData,activeMarketHistory:c.Z.getState().activeMarketHistory,bucketSize:c.Z.getState().bucketSize,currentGroupOrderLimit:c.Z.getState().currentGroupOrderLimit,feedPrice:c.Z.getState().feedPrice,marketLimitOrders:c.Z.getState().marketLimitOrders})});const U=O=(0,r.h)(O);var $=s(23037),B=s(82267);function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},W.apply(this,arguments)}class z extends n.Component{static propTypes={assetToSell:$.Z.ChainAsset,assetToReceive:$.Z.ChainAsset};static defaultProps={assetToSell:"USD",assetToReceive:"GPH"};render(){return this.props.assetToReceive.get&&this.props.assetToSell.get?n.createElement(U,this.props):null}}const j=(0,B.Z)(z,{show_loader:!0});class V extends n.Component{render(){let e=this.props.match.params.marketID?this.props.match.params.marketID.toUpperCase().split("_"):["",""];return 2==e.length&&e[0]&&e[0]===e[1]?n.createElement(a.Z,{subtitle:"market_not_found_subtitle"}):n.createElement(j,W({},this.props,{assetToSell:e[0]||"",assetToReceive:2==e.length?e[1]:""}))}}const G=V},3894:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(67294),a=s(13863),i=s(23037),r=s(82267),l=s(43393);class o extends n.Component{static propTypes={dos:i.Z.ChainObjectsList};static defaultProps={dos:(0,l.List)()};constructor(){super(),this.getDynamicObject=this.getDynamicObject.bind(this)}getDynamicObject(e){return this.props.dos.find((t=>t&&t.get("id")===e))}render(){return n.cloneElement(n.Children.only(this.props.children),{...this.props,getDynamicObject:this.getDynamicObject})}}o=(0,r.Z)(o);var c=s(45697),m=s.n(c),u=s(60567);function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},h.apply(this,arguments)}class d extends n.Component{static propTypes={replaceNoneToBts:m().bool,maxWidth:m().number};static defaultProps={replaceNoneToBts:!0,maxWidth:20};constructor(e){super(e),this.state={imgError:!1}}shouldComponentUpdate(e,t){return this.props.asset!==e.asset||this.props.maxWidth!==e.maxWidth||this.props.whiteList!==e.whiteList||this.state.imgError!==t.imgError}_onError(e){this.state.imgError||(this.props.replaceNoneToBts?this.refs[e.toLowerCase()].src="asset-symbols/unknown.png":this.refs[e.toLowerCase()].remove(),this.setState({imgError:!0}))}render(){let{asset:e}=this.props;const t=function(e){if(null===e)return"unknown";let t=e.get("symbol");return(0,u.sA)(t)}(e);return n.createElement("img",{ref:t.toLowerCase(),className:"column-hide-small",onError:this._onError.bind(this,t),style:{maxWidth:this.props.maxWidth,marginRight:5,marginTop:"-3px"},src:`asset-symbols/${t.toLowerCase()}.png`})}}d=function(e,t={}){t.propNames=t.propNames||[t.asList?"assets":"asset"];const s=t.propNames.reduce(((e,s)=>(e[s]=t.asList?i.Z.ChainAssetsList:i.Z.ChainAsset.isRequired,e)),{});let c=Object.keys(s).reduce(((e,s)=>{let n=t.defaultProps&&t.defaultProps[s];return e[s]=t.asList?(0,l.List)(n||[]):n||"1.3.0",e}),{});t.defaultProps&&t.defaultProps.tempComponent&&(c.tempComponent=t.defaultProps.tempComponent);class m extends n.Component{static propTypes=s;static defaultProps=c;render(){let e={},s={},a=(0,l.List)();Object.keys(this.props).forEach((n=>{this.props[n]&&-1!==t.propNames.indexOf(n)?(t.withDynamic&&(t.asList?this.props[n].forEach((e=>{e&&(a=a.push(e.get("dynamic_asset_data_id")))})):a=a.push(this.props[n].get("dynamic_asset_data_id"))),e[n]=t.asList?this.props[n].filter((e=>!!e)):this.props[n]):s[n]=this.props[n]}));let i=n.cloneElement(n.Children.only(this.props.children),{...s,...e});return t.withDynamic?n.createElement(o,{dos:a},i):i}}m=(0,r.Z)(m);class u extends n.Component{render(){return n.createElement(m,this.props,n.createElement(e,{ref:"bound_component"}))}}return u.displayName=`Wrapper(${(0,a.G)(e)})`,u}(d);class p extends n.Component{render(){return n.createElement(d,h({},this.props,{asset:this.props.name}))}}},94672:(e,t,s)=>{s.d(t,{u:()=>m,h:()=>u});var n=s(67294),a=s(23037),i=s(80563),r=s(82267),l=s(89449),o=s(32793),c=s(52531);const m=function(e){return!!e&&!!e.get("id")},u=function(e){let t=class extends n.Component{static propTypes={currentAccount:a.Z.ChainAccount};static defaultProps={autosubscribe:!0};constructor(e){super(e)}render(){return m(this.props.currentAccount)?n.createElement(e,this.props):n.createElement(c.Z,null)}};return t=(0,r.Z)(t),t=(0,i.ZP)(t,100,{leading:!1}),(0,l.$)(t,{listenTo:()=>[o.Z],getProps(){let e=o.Z.getState().currentAccount||o.Z.getState().passwordAccount||"please-login";return{currentAccount:new Map([["name",e]])}}})}},34091:(e,t,s)=>{s.d(t,{m:()=>g,O:()=>p});var n=s(67294),a=s(45697),i=s.n(a),r=s(94184),l=s.n(r),o=s(89449),c=s(55294),m=s(39014),u=s(112),h=s.n(u),d=s(5977);class p extends n.Component{static propTypes={changeTab:i().func,isActive:i().bool.isRequired,index:i().number.isRequired,className:i().string,isLinkTo:i().string,subText:i().oneOfType([i().object,i().string])};static defaultProps={isActive:!1,index:0,className:"",isLinkTo:"",subText:null};render(){let{isActive:e,index:t,changeTab:s,title:a,className:i,updatedTab:r,disabled:o,subText:c}=this.props,m=l()({"is-active":e},i);return"string"==typeof a&&a.indexOf(".")>0&&(a=h().translate(a)),this.props.collapsed?("string"==typeof c&&(c=c.trim()),"span"===a.type&&(a=a.props.children[2]),n.createElement("option",{value:t,"data-is-link-to":this.props.isLinkTo},a,r?"*":"",c&&" (",c&&c,c&&")")):n.createElement("li",{className:m,onClick:o?null:s.bind(this,t,this.props.isLinkTo)},n.createElement("a",null,n.createElement("span",{className:"tab-title"},a,r?"*":""),c&&n.createElement("div",{className:"tab-subtext"},c)))}}class g extends n.Component{static propTypes={setting:i().string,defaultActiveTab:i().number,segmented:i().bool};static defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}};constructor(e){super(),this.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},this._setDimensions=this._setDimensions.bind(this)}componentDidMount(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}UNSAFE_componentWillReceiveProps(e){let t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}componentWillUnmount(){window.removeEventListener("resize",this._setDimensions)}_setDimensions(){let e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}_changeTab(e,t){e!==this.state.activeTab&&(""!==t&&this.props.history.push(t),this.props.setting&&c.Z.changeViewSetting({[this.props.setting]:e}),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}render(){let{children:e,contentClass:t,tabsClass:s,style:a,segmented:i}=this.props;const r=this.state.width<900&&n.Children.count(e)>2;let o=null,c=n.Children.map(e,((e,t)=>{if(!e)return null;if(r&&e.props.disabled)return null;let s=t===this.state.activeTab;return s&&(o=e.props.children),n.cloneElement(e,{collapsed:r,isActive:s,changeTab:this._changeTab.bind(this),index:t})})).filter((e=>null!==e));return o||(o=c[0].props.children),n.createElement("div",{className:l()(this.props.actionButtons?"with-buttons":"",this.props.className)},n.createElement("div",{className:"service-selector"},n.createElement("ul",{style:a,className:l()("button-group no-margin",s,{segmented:i})},r?n.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},n.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:e=>{let t=parseInt(e.target.value,10);this._changeTab(t,e.target[t].attributes["data-is-link-to"].value)}},c)):c,this.props.actionButtons?n.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),n.createElement("div",{className:l()("tab-content",t)},o))}}g=(0,o.$)(g,{listenTo:()=>[m.Z],getProps:()=>({viewSettings:m.Z.getState().viewSettings})}),g=(0,d.EN)(g)},26048:(e,t,s)=>{s.d(t,{gr:()=>i,lQ:()=>r,kg:()=>o});var n=s(41737),a=s(30806);function i(e,t=!1,s,n){if(!e&&""!==e)return;let a=e.toUpperCase();a.startsWith("GP")&&a.length>=6&&(a=e.substr(3,a.length-1)),s(a,10,t),n({lookupQuote:a})}function r({searchAssets:e,marketPickerAsset:t,baseAsset:s,quoteAsset:a},{inputValue:i,lookupQuote:r},c,m){c({activeSearch:!0});let u=0,h=[],d=s.get("symbol"),p=a.get("symbol");e.size&&i&&i.length>2&&e.filter((e=>{try{if(e.options.description){let t=JSON.parse(e.options.description);if("visible"in t&&!t.visible)return!1}}catch(e){}return-1!==e.symbol.indexOf(r)})).forEach((e=>{if(u>100)return;u++;let n=o(e.issuer),a=s.get("symbol"),i=e.symbol+"_"+a,r=p==t;(r&&e.symbol!=d||!r&&e.symbol!=p)&&h.push([i,{quote:e.symbol,base:a,issuerId:e.issuer,issuer:n}])}));const g=function(e,t){return t.startsWith("GP")&&t.length>=6&&(t=t.substr(3,t.length-1)),e.sort((([,e],[,s])=>{const a=l(e),i=l(s);if(a.asset!==i.asset){if(a.asset===t)return-1;if(i.asset===t)return 1;if(a.asset>i.asset)return-1;if(a.asset<i.asset)return 1}if(a.isCommittee^i.isCommittee){if(a.isCommittee)return-1;if(i.isCommittee)return 1}const r=(0,n.v$)(e.quote),o=(0,n.v$)(s.quote);return r&&!o?-1:o&&!r||a.gateway>i.gateway?1:a.gateway<i.gateway?-1:0}))}(h,i);m(g)}function l(e){const t={},s=e.quote;if(-1!==s.indexOf(".")){const[e,n]=s.split(".");t.gateway=e,t.asset=n}else t.asset=s;return"1.2.0"===e.issuerId&&(t.isCommittee=!0),t}function o(e){let t=a.ChainStore.getObject(e,!1,!1);return t?t.get("name"):void 0}},99111:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(77226),a=s(66092);const i=function(){return a.Z.Date.now()};var r=s(3782),l=Math.max,o=Math.min;const c=function(e,t,s){var a,c,m,u,h,d,p=0,g=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(t){var s=a,n=c;return a=c=void 0,p=t,u=e.apply(n,s)}function _(e){return p=e,h=setTimeout(f,t),g?A(e):u}function E(e){var s=e-d;return void 0===d||s>=t||s<0||v&&e-p>=m}function f(){var e=i();if(E(e))return S(e);h=setTimeout(f,function(e){var s=t-(e-d);return v?o(s,m-(e-p)):s}(e))}function S(e){return h=void 0,b&&a?A(e):(a=c=void 0,u)}function y(){var e=i(),s=E(e);if(a=arguments,c=this,d=e,s){if(void 0===h)return _(d);if(v)return clearTimeout(h),h=setTimeout(f,t),A(d)}return void 0===h&&(h=setTimeout(f,t)),u}return t=(0,r.Z)(t)||0,(0,n.Z)(s)&&(g=!!s.leading,m=(v="maxWait"in s)?l((0,r.Z)(s.maxWait)||0,t):m,b="trailing"in s?!!s.trailing:b),y.cancel=function(){void 0!==h&&clearTimeout(h),p=0,a=d=c=h=void 0},y.flush=function(){return void 0===h?u:S(i())},y}}}]);