(this.webpackJsonp=this.webpackJsonp||[]).push([[26],{1999:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(339),i=n(44),s=n(47),l=n(9),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){p(this,t);var e=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getDynamicObject=e.getDynamicObject.bind(e),e}return d(t,o.a.Component),u(t,[{key:"getDynamicObject",value:function(e){return this.props.dos.find(function(t){return t&&t.get("id")===e})}},{key:"render",value:function(){return o.a.cloneElement(o.a.Children.only(this.props.children),c({},this.props,{getDynamicObject:this.getDynamicObject}))}}]),t}();h.propTypes={dos:i.a.ChainObjectsList},h.defaultProps={dos:Object(l.List)()},h=Object(s.a)(h);var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.propNames=t.propNames||[t.asList?"assets":"asset"];var n=t.propNames.reduce(function(e,n){return e[n]=t.asList?i.a.ChainAssetsList:i.a.ChainAsset.isRequired,e},{}),a=Object.keys(n).reduce(function(e,n){var a=t.defaultProps&&t.defaultProps[n];return e[n]=t.asList?Object(l.List)(a||[]):a||"1.3.0",e},{});t.defaultProps&&t.defaultProps.tempComponent&&(a.tempComponent=t.defaultProps.tempComponent);var f=function(e){function n(){return p(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,o.a.Component),u(n,[{key:"render",value:function(){var e=this,n={},a={},r=Object(l.List)();Object.keys(this.props).forEach(function(o){e.props[o]&&-1!==t.propNames.indexOf(o)?(t.withDynamic&&(t.asList?e.props[o].forEach(function(e){e&&(r=r.push(e.get("dynamic_asset_data_id")))}):r=r.push(e.props[o].get("dynamic_asset_data_id"))),n[o]=t.asList?e.props[o].filter(function(e){return!!e}):e.props[o]):a[o]=e.props[o]});var i=o.a.cloneElement(o.a.Children.only(this.props.children),c({},a,n));return t.withDynamic?o.a.createElement(h,{dos:r},i):i}}]),n}();f.propTypes=n,f.defaultProps=a,f=Object(s.a)(f);var b=function(t){function n(){return p(this,n),m(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,o.a.Component),u(n,[{key:"render",value:function(){return o.a.createElement(f,this.props,o.a.createElement(e,{ref:"bound_component"}))}}]),n}();return b.displayName="Wrapper("+Object(r.a)(e)+")",b},b=n(1),y=n.n(b),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(e){_(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imgError:!1},n}return k(t,o.a.Component),v(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.asset!==e.asset||this.props.maxWidth!==e.maxWidth||this.props.whiteList!==e.whiteList||this.state.imgError!==t.imgError}},{key:"_onError",value:function(e){this.state.imgError||(this.props.replaceNoneToBts?this.refs[e.toLowerCase()].src="asset-symbols/bts.png":this.refs[e.toLowerCase()].remove(),this.setState({imgError:!0}))}},{key:"render",value:function(){var e=function(e){return e.get("symbol")}(this.props.asset);return o.a.createElement("img",{ref:e.toLowerCase(),className:"column-hide-small",onError:this._onError.bind(this,e),style:{maxWidth:this.props.maxWidth,marginRight:5,marginTop:"-3px"},src:"asset-symbols/"+e.toLowerCase()+".png"})}}]),t}();w.propTypes={replaceNoneToBts:y.a.bool,maxWidth:y.a.number},w.defaultProps={replaceNoneToBts:!0,maxWidth:20},w=f(w);var C=function(e){function t(){return _(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,o.a.Component),v(t,[{key:"render",value:function(){return o.a.createElement(w,g({},this.props,{asset:this.props.name}))}}]),t}();t.a=C},2000:function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return v});var a=n(0),o=n.n(a),r=n(1),i=n.n(r),s=n(3),l=n.n(s),c=n(30),u=n(22),p=n(21),m=n(5),d=n.n(m),h=n(2248),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return b(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,o.a.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.index,a=e.changeTab,r=e.title,i=e.className,s=e.updatedTab,c=e.disabled,u=e.subText,p=l()({"is-active":t},i);return"string"==typeof r&&r.indexOf(".")>0&&(r=d.a.translate(r)),this.props.collapsed?("string"==typeof u&&(u=u.trim()),"span"===r.type&&(r=r.props.children[2]),o.a.createElement("option",{value:n,"data-is-link-to":this.props.isLinkTo},r,s?"*":"",u&&" (",u&&u,u&&")")):o.a.createElement("li",{className:p,onClick:c?null:a.bind(this,n,this.props.isLinkTo)},o.a.createElement("a",null,o.a.createElement("span",{className:"tab-title"},r,s?"*":""),u&&o.a.createElement("div",{className:"tab-subtext"},u)))}}]),t}();v.propTypes={changeTab:i.a.func,isActive:i.a.bool.isRequired,index:i.a.number.isRequired,className:i.a.string,isLinkTo:i.a.string,subText:i.a.oneOfType([i.a.object,i.a.string])},v.defaultProps={isActive:!1,index:0,className:"",isLinkTo:"",subText:null};var _=function(e){function t(e){b(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return g(t,o.a.Component),f(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e,t){e!==this.state.activeTab&&(""!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.contentClass,r=t.tabsClass,i=t.style,s=t.segmented,c=this.state.width<900&&o.a.Children.count(n)>2,u=null,p=o.a.Children.map(n,function(t,n){if(!t)return null;if(c&&t.props.disabled)return null;var a=n===e.state.activeTab;return a&&(u=t.props.children),o.a.cloneElement(t,{collapsed:c,isActive:a,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return null!==e});return u||(u=p[0].props.children),o.a.createElement("div",{className:l()(this.props.actionButtons?"with-buttons":"",this.props.className)},o.a.createElement("div",{className:"service-selector"},o.a.createElement("ul",{style:i,className:l()("button-group no-margin",r,{segmented:s})},c?o.a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},o.a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:function(t){var n=parseInt(t.target.value,10);e._changeTab(n,t.target[n].attributes["data-is-link-to"].value)}},p)):p,this.props.actionButtons?o.a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),o.a.createElement("div",{className:l()("tab-content",a)},u))}}]),t}();_.propTypes={setting:i.a.string,defaultActiveTab:i.a.number,segmented:i.a.bool},_.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},_=Object(c.a)(_,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),_=Object(h.a)(_)},2269:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=(n(1997),n(15),n(6)),i=(n(2e3),n(1999)),s=n(2),l=n.n(s),c=n(4),u=n(2247),p=n(21),m=n(595),d=n(602),h=n(23),f=n(30),b=n(589),y=n(16),g=n(373),v=n(42),_=n(44),E=n(47),k=n(5),w=n.n(k),C=n(34),O=n(102),T=n(3),A=n.n(T),x=n(1),S=n.n(x),j=(n(281),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var N=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={accountIndex:[],locked:null},n.timer=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),j(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.account,a=t.accountName;a&&this._addThisToIndex(a),this.props.myActiveAccounts.map(function(t){e._addThisToIndex(t)}),this.props.contacts.map(function(t){e._addThisToIndex(t)}),this._fetchAccounts(),this.props.onAccountChanged&&n&&this.props.onAccountChanged(n),!this.props.typeahead&&a&&this.onInputChanged(a)}},{key:"componentDidUpdate",value:function(e){this.props.focus&&this.props.editable&&!this.props.disabled&&this.refs.user_input.focus(),e.account&&e.account!==this.props.account&&this.props.onAccountChanged&&this.props.onAccountChanged(this.props.account)}},{key:"_addToIndex",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(this._addThisToIndex(e),this._fetchAccounts()):(clearTimeout(this.timer),this.timer=setTimeout(function(){t._addToIndex(e,!0)},500))}},{key:"_addThisToIndex",value:function(e){var t=this.state.accountIndex;if(e){var n=t.find(function(t){return t.name===e});e&&!n&&t.push({name:e,data:null,attempts:0})}}},{key:"_getIndex",value:function(e,t){return t.findIndex(function(t){return t.name===e})}},{key:"_getSearchArray",value:function(){return this.state.accountIndex.filter(function(e){return!e.data&&e.attempts<5?e.name:null}).map(function(e){return e.name})}},{key:"_fetchAccounts",value:function(){var e=this,t=this.state.accountIndex,n=this._getSearchArray();n.length>0&&Object(r.FetchChainObjects)(r.ChainStore.getAccount,n,3e3,{}).then(function(a){a.forEach(function(a){if(a){var o=e._getIndex(a.get("name"),t),r=e._populateAccountIndex(a);r&&(t[o]=r,n.splice(a.get("name")))}}),n.forEach(function(n){var a=e._getIndex(n,t);t[a].attempts++}),e.setState({accountIndex:t}),e.state.accountIndex.find(function(e){return!e.data&&e.attempts<5})&&setTimeout(function(){e._fetchAccounts()},500)})}},{key:"_populateAccountIndex",value:function(e){var t=this.props,n=t.myActiveAccounts,a=t.contacts;if(!e)return null;var o=e.get("name"),i=r.ChainStore.getAccountMemberStatus(e),s=this.getInputType(o),l=O.a.isKnownScammer(o)?w.a.translate("account.member.suspected_scammer"):w.a.translate("account.member."+i),c="name"===s?"#"+e.get("id").substring(4):"id"===s?e.get("name"):"pubkey"==s&&this.props.allowPubKey?"Public Key":null;return{name:o,attempts:0,data:{id:e.get("id"),name:o,type:s,status:i,isOwnAccount:n.has(o),isContact:a.has(o),isKnownScammer:O.a.isKnownScammer(o),statusLabel:l,rightLabel:c,className:O.a.isKnownScammer(o)||!e?"negative":null}}}},{key:"getAccount",value:function(){return this.props.account}},{key:"getError",value:function(){var e=this.props,t=e.account,n=e.accountName,a=e.error,o=e.typeahead,r=n?this.getInputType(n):null;return o||!t&&n&&"pubkey"!==r&&(a=w.a.translate("account.errors.unknown")),a||!t||r||(a=w.a.translate("account.errors.invalid")),a}},{key:"getInputType",value:function(e){return e?"#"===e[0]&&y.a.is_object_id("1.2."+e.substring(1))?"id":r.ChainValidation.is_account_name(e,!0)?"name":this.props.allowPubKey&&r.PublicKey.fromPublicKeyString(e)?"pubkey":null:null}},{key:"getVerifiedAccountName",value:function(e){var t=this.props.allowUppercase,n=null;n="string"==typeof e?e:e&&e.target?e.target.value.trim():"",t||(n=n.toLowerCase());var a=n.replace("#","").match(/(?:\/account\/)(.*)/);return a&&(n=a[1]),n}},{key:"_notifyOnChange",value:function(e,t){var n=this,a=this.props;"input"==t&&this.props.typeahead&&this.props.requireActiveSelect&&(a.onAccountChanged&&a.onAccountChanged(null),a.onChange&&a.onChange(null));var o=this.getVerifiedAccountName(e);a.onChange&&(o||""===o)&&a.onChange(o),a.onAccountChanged&&Object(r.FetchChain)("getAccount",o,void 0,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},o,!1)).then(function(e){e&&(n.props.requireActiveSelect&&"select"==t||!n.props.requireActiveSelect)&&a.onAccountChanged(e)}).catch(function(e){console.log(e)})}},{key:"onSelect",value:function(e){this._notifyOnChange(e,"select")}},{key:"onInputChanged",value:function(e){this._addToIndex(this.getVerifiedAccountName(e)),this._notifyOnChange(e,"input")}},{key:"onKeyDown",value:function(e){13!==e.keyCode&&9!==e.keyCode||this.onAction(e)}},{key:"_onAddContact",value:function(){v.a.addAccountContact(this.props.accountName)}},{key:"_onRemoveContact",value:function(){v.a.removeAccountContact(this.props.accountName)}},{key:"onAction",value:function(e){var t=this.props,n=t.onAction,a=t.disableActionButton,o=t.account,r=t.accountName;e.preventDefault(),this.getError()||!n||a||(o?n(o):"pubkey"===this.getInputType(r)&&n(r))}},{key:"render",value:function(){var e,t,n=this,a=this.state.accountIndex,r=this.props,i=r.account,s=r.accountName,u=r.disableActionButton,p=this.state.accountIndex.find(function(e){return!e.data&&e.attempts<5}),m=null!==this.state.locked?this.state.locked:this.props.locked,d=this.getError(),h=void 0,f=void 0,b=void 0,y=void 0;if(b=!m&&(null!=this.props.editable?this.props.editable:void 0),t=!!m||(null!=this.props.disabled?this.props.disabled:void 0),i){var v=this._getIndex(i.get("name"),a);f=a&&a[v]?a[v].data:null}if(e=!(i||f&&"pubkey"===f.type)||d||u,f&&f.isOwnAccount?y=o.a.createElement(c.Tooltip,{placement:"top",title:w.a.translate("tooltip.own_account")},o.a.createElement("span",{className:"tooltip green"},o.a.createElement(c.Icon,{type:"user"}))):f&&f.isKnownScammer?y=o.a.createElement(c.Tooltip,{placement:"top",title:w.a.translate("tooltip.scam_account")},o.a.createElement("span",{className:"tooltip red"},o.a.createElement(c.Icon,{type:"warning",theme:"filled"}))):f&&f.isContact?y=o.a.createElement(c.Tooltip,{placement:"top",title:w.a.translate("tooltip.follow_user"),onClick:this._onRemoveContact.bind(this)},o.a.createElement("span",{className:"tooltip green"},o.a.createElement(c.Icon,{type:"star",theme:"filled"}))):f&&(y=o.a.createElement(c.Tooltip,{placement:"top",title:w.a.translate("tooltip.follow_user_add"),onClick:this._onAddContact.bind(this)},o.a.createElement("span",{className:"tooltip"},o.a.createElement(c.Icon,{type:"star"})))),this.props.typeahead){var _=a.filter(function(e){return e.data?-1!==n.props.excludeAccounts.indexOf(e.id)?null:e.data.isOwnAccount||!n.props.locked&&e.data.isContact||s&&e.data.name===s?e:void 0:null}).sort(function(e,t){return e.data.isOwnAccount<t.data.isOwnAccount&&e.data.name>t.data.name?1:-1}).map(function(e){return o.a.createElement(c.Select.Option,{key:e.data.id,value:e.data.name,disabled:!!e.data.disabled||void 0},e.data.isOwnAccount?o.a.createElement(c.Icon,{type:"user"}):null,e.data.isContact?o.a.createElement(c.Icon,{type:"star"}):null,e.data.isKnownScammer?o.a.createElement(c.Icon,{type:"warning"}):null," ",e.data.name,o.a.createElement("span",{style:{float:"right"}},e.data.statusLabel))});h=o.a.createElement(c.Select,{showSearch:!0,optionLabelProp:"value",onSelect:this.onSelect.bind(this),onSearch:this.onInputChanged.bind(this),placeholder:w.a.translate("account.search"),notFoundContent:w.a.translate("global.not_found"),value:f?f.name:null,disabled:!!t||void 0},_)}else h=o.a.createElement(c.Input,{style:{textTransform:f&&"pubkey"===f.type?null:"lowercase",fontVariant:"initial"},name:"username",id:"username",autoComplete:this.props.editable?"username":void 0,type:"text",value:this.props.accountName||"",placeholder:this.props.placeholder||w.a.translate("account.name"),disabled:!!this.props.disabled||void 0,ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:!this.props.editable||this.props.disabled?-1:this.props.tabIndex,editable:b?b.toString():void 0,readOnly:b?(!b).toString():void 0});var E=this.props.hideImage?null:f&&"pubkey"===f.accountType?o.a.createElement("div",{className:"account-image"},o.a.createElement(C.a,{name:"key",title:"icons.key",size:"4x"})):o.a.createElement(g.a,{size:{height:this.props.size||33,width:this.props.size||33},account:f?f.name:null,custom_image:null}),k=m?"":null,O=this.props.label&&f?o.a.createElement("div",{className:"header-area"+(this.props.hideImage?" no-margin":"")},o.a.createElement("label",{className:A()("right-label",f.isContact||f.isOwnAccount?"positive":null,f.isKnownScammer?"negative":null),style:{marginTop:-30}},o.a.createElement("span",{style:{paddingRight:"0.5rem"}},f.rightLabel," ",f.displayText),y)):null,T=this.props.noForm?o.a.Fragment:c.Form,x=this.props.noForm?{}:{className:"full-width",layout:"vertical",style:this.props.style};return o.a.createElement(c.Tooltip,{className:"input-area",title:this.props.tooltip,mouseEnterDelay:.5},o.a.createElement(T,x,o.a.createElement(c.Form.Item,{label:this.props.label?w.a.translate(this.props.label):"",validateStatus:d?"error":null,help:d||null},O,this.props.useHR&&o.a.createElement("hr",null),o.a.createElement("div",{className:"inline-label input-wrapper"},E,h,p?o.a.createElement(c.Icon,{type:"loading",style:{padding:10}}):null,k,this.props.children,this.props.onAction?o.a.createElement(c.Tooltip,{title:w.a.translate("tooltip.required_input",{type:w.a.translate("global.field_type.account")})},o.a.createElement(c.Button,{type:"primary",disabled:e,onClick:this.onAction.bind(this)},o.a.createElement(l.a,{content:this.props.action_label}))):null))))}}]),t}();N.propTypes={label:S.a.string,error:S.a.element,placeholder:S.a.string,onChange:S.a.func,onAccountChanged:S.a.func,onAction:S.a.func,accountName:S.a.string,account:_.a.ChainAccount,tabIndex:S.a.number,disableActionButton:S.a.bool,allowUppercase:S.a.bool,typeahead:S.a.bool,excludeAccounts:S.a.array,focus:S.a.bool,disabled:S.a.bool,editable:S.a.bool,locked:S.a.bool,requireActiveSelect:S.a.bool,noForm:S.a.bool},N.defaultProps={autosubscribe:!1,excludeAccounts:[],disabled:null,editable:null,locked:!1,requireActiveSelect:!0,noForm:!1},N=Object(E.a)(N);var I=N=Object(f.a)(N,{listenTo:function(){return[h.a]},getProps:function(){return{myActiveAccounts:h.a.getState().myActiveAccounts,contacts:h.a.getState().accountContacts}}}),P=n(371),L=n(370),D=n(35),R=(n(40),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W=function(e){function t(e){return F(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return K(t,d["a"]),B(t,[{key:"componentWillReceiveProps",value:function(e){e.to_name!==this.state.to_name&&this.setState({to_name:e.to_name?e.to_name:"",to_account:e.to_name?r.ChainStore.getAccount(e.to_name):null})}},{key:"render",value:function(){var e=this.state,t=e.propose,n=e.from_account,a=e.to_account,i=e.asset,s=e.asset_id,u=e.propose_account,p=e.feeAmount,d=e.amount,f=e.to_name,y=e.from_name,g=e.memo,v=e.balanceError,_=e.hidden,E=h.a.isMyAccount(n)||y===this.props.passwordAccount,k=!(!n||E||t),C=this._getAvailableAssets().asset_types,O=null;if(n&&n.get("balances")&&!k){var T=n.get("balances").toJS(),A=this.state.balanceError?"has-error":"";if(1===C.length&&(i=r.ChainStore.getAsset(C[0])),C.length>0){var x=i?i.get("id"):C[0];O=o.a.createElement("span",null,o.a.createElement(l.a,{component:"span",content:"transfer.available"}),":"," ",o.a.createElement("span",{className:A,style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._setTotal.bind(this,x,T[x],p.getAmount({real:!0}),p.asset_id)},o.a.createElement(L.a,{balance:T[x]})))}else O=o.a.createElement("span",null,o.a.createElement("span",{className:A},o.a.createElement(l.a,{content:"transfer.errors.noFunds"})))}var S=t&&!u,j=parseFloat(String.prototype.replace.call(d,/,/g,"")),N=j&&!Object(m.a)(j),R=!n||!a||!N||!i||k||S||v||n.get("id")==a.get("id"),B=this.props.tabIndex;return this.state.open?o.a.createElement("div",{id:"send_modal_wrapper",className:_||!this.state.open?"hide":""},o.a.createElement(c.Modal,{visible:this.state.isModalVisible,id:this.props.id,overlay:!0,onCancel:this.hideModal,footer:[o.a.createElement(c.Button,{key:"send",disabled:R,onClick:R?null:this.onSubmit.bind(this)},t?w.a.translate("propose"):w.a.translate("transfer.send")),o.a.createElement(c.Button,{key:"Cancel",tabIndex:B++,onClick:this.onClose},o.a.createElement(l.a,{component:"span",content:"transfer.cancel"}))]},o.a.createElement("div",{className:"grid-block vertical no-overflow"},o.a.createElement("div",{className:"content-block",style:{textAlign:"center",fontSize:"18px"}},o.a.createElement(l.a,{content:"lottery.modal.header",wallet_name:Object(D.s)()})),this.state.open?o.a.createElement(c.Form,{className:"full-width-wrapper",layout:"vertical"},o.a.createElement(I,{label:"transfer.from",accountName:y,account:n,onChange:this.fromChanged.bind(this),onAccountChanged:this.onFromAccountChanged.bind(this),typeahead:!0,tabIndex:B++,locked:!0,noForm:!0}),o.a.createElement(I,{label:"transfer.to",accountName:f,account:a,onChange:this.toChanged.bind(this),onAccountChanged:this.onToAccountChanged.bind(this),typeahead:!0,tabIndex:B++,locked:!0,noForm:!0}),o.a.createElement(b.a,{label:"transfer.amount",amount:d,onChange:this.onAmountChanged.bind(this),asset:C.length>0&&i?i.get("id"):s||C[0],display_balance:O,tabIndex:B++,allowNaN:!0,locked:!0}),o.a.createElement(P.a,{account:n,transaction:{type:"transfer",options:["price_per_kbyte"],data:{type:"memo",content:g}},onChange:this.onFeeChanged.bind(this),tabIndex:B++})):null))):null}}]),t}(),z=function(e){function t(){return F(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return K(t,o.a.Component),B(t,[{key:"render",value:function(){return o.a.createElement(W,R({},this.props,{ref:this.props.refCallback}))}}]),t}(),U=z=Object(f.a)(z,{listenTo:function(){return[h.a]},getProps:function(e){return{currentAccount:h.a.getState().currentAccount,passwordAccount:h.a.getState().passwordAccount,tabIndex:e.tabIndex||0}}}),q=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var V=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getContent=function(){return o.a.createElement("div",{className:"lotteryTable"},o.a.createElement("p",null,o.a.createElement(u.a,{style:{margin:2,fontSize:"1.0rem"},to:"/market/RUDEX.LOTTERY_RUDEX.BTC"},o.a.createElement(l.a,{content:"lottery.buy"}),o.a.createElement("span",{style:{margin:2,fontSize:"1.0rem"}},o.a.createElement(i.a,{maxWidth:25,replaceNoneToBts:!1,name:"RUDEX.LOTTERY"}),"LOTTERY"))),o.a.createElement("table",{className:"lotteryTable"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"lotteryBlock"},o.a.createElement(l.a,{content:"lottery.text.main"}))),o.a.createElement("td",null,o.a.createElement("div",{className:"lotteryBlock"},o.a.createElement(l.a,{content:"lottery.all_stat.main"})))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.text.block_1"}),o.a.createElement("a",{style:{padding:"0.5rem",lineHeight:"2rem",fontSize:"1em"},href:"https://gph.ai",target:"_blank",rel:"noopener noreferrer"},"GPH"),o.a.createElement(l.a,{content:"lottery.text.block_11"}),o.a.createElement(l.a,{content:"lottery.text.block_12"}),o.a.createElement(u.a,{style:{margin:2,fontSize:"1.0rem"},to:"/market/RUDEX.LOTTERY_RUDEX.BTC"},o.a.createElement("span",{style:{margin:2,fontSize:"1.0rem"}},o.a.createElement(i.a,{maxWidth:25,replaceNoneToBts:!1,name:"RUDEX.LOTTERY"}),"LOTTERY/BTC")),".",o.a.createElement(l.a,{content:"lottery.text.block_13"}),o.a.createElement("br",null),o.a.createElement("a",{style:{padding:"0.5rem",lineHeight:"2rem",fontSize:"1em"},href:"ru"==p.a.getState().settings.get("locale")?"https://golos.id/ru--blokcheijn/@rudex/nachalnoe-raspredelenie-tokenov-blokcheina-graphene-ot-komandy-rudex?invite=rudex":"https://steemit.com/blockchain/@rudex/graphene-blockchain-by-rudex-team-initial-distribution-announcement",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(l.a,{content:"lottery.more"}))),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.text.block_2"})),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.text.block_3"})),o.a.createElement("li",null,o.a.createElement("a",{onClick:e.triggerSend.bind(e,"1.3.5878","RUDEX.LOTTERY")}," "," ",o.a.createElement(l.a,{content:"lottery.reg"}))))),o.a.createElement("td",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.all_stat.regs_all"})," ",e.state.common_stat.tickets),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.all_stat.win_all"})," ",e.state.common_stat.tokens),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.all_stat.try"})," ",e.state.common_stat.purchase_total)))))),o.a.createElement("table",{className:"lotteryTable",style:{width:"50%"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"lotteryBlock"},o.a.createElement(l.a,{content:"lottery.my_stat.main"})))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.my_stat.regs_all"})," ",e.state.my_stat.tickets),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.my_stat.win_all"})," ",e.state.my_stat.tokens),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.my_stat.try"})," ",e.state.my_stat.purchase_total)),o.a.createElement("div",{className:"accDetails"},o.a.createElement(l.a,{content:"lottery.details.main"})),e.getMyHistoryDetails())))))},e.getMyHistoryDetails=function(){return e.state.my_stat_details.map(function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("ul",{style:{listStyleType:"square"}},o.a.createElement("li",null,"operationId ",e.operationId),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.details.trx"})," ",o.a.createElement("a",{href:"https://bts.ai/tx/"+e.trx_id,target:"_blank",rel:"noopener noreferrer"},e.trx_id)),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.details.num_blocks"})," ",o.a.createElement("a",{href:"https://bts.ai/block/"+e.blocknumber,target:"_blank",rel:"noopener noreferrer"},e.blocknumber)),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.details.tickets"})," ",e.tickets),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.details.tokens"})," ",e.tokens),o.a.createElement("li",null,o.a.createElement(l.a,{content:"lottery.details.start"})," ",e.random_start)),o.a.createElement("hr",null))})},e.state={uri:"https://lottery.rudex.org/api/lottery/",LotteryNotice1Informed:!1,updating:!0,common_stat:{},my_stat:{},my_stat_details:[]},e._setCommonStat=e._setCommonStat.bind(e),e._setMyStat=e._setMyStat.bind(e),e._setMyStatDetails=e._setMyStatDetails.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),q(t,[{key:"onLotteryNotice1Informed",value:function(){this.setState({LotteryNotice1Informed:!this.state.LotteryNotice1Informed})}},{key:"componentDidMount",value:function(){var e=this;setInterval(function(){return e._getStats(e._setCommonStat,e._setMyStat,e._setMyStatDetails)},5e3)}},{key:"shouldComponentUpdate",value:function(e,t){return 0==t.updating}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:"_setCommonStat",value:function(e){var t=e;this.setState({common_stat:t})}},{key:"_setMyStat",value:function(e){var t=e;this.setState({my_stat:t})}},{key:"_setMyStatDetails",value:function(e){var t=e;this.setState({my_stat_details:t})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"grid-block vertical"},o.a.createElement("div",{className:"listingTable__row"},o.a.createElement(U,{id:"send_modal_listing",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.currentAccount,to_name:"rudex-lottery",asset_id:"1.3.5878"})),o.a.createElement("div",{className:"grid-content"},o.a.createElement("div",{className:"content-block small-12"},o.a.createElement("div",{className:"tabs-container generic-bordered-box"},o.a.createElement("label",{className:"horizontal",style:{backgroundColor:"white"}},o.a.createElement("div",{className:"grid-container",style:{padding:"2rem 8px"}},o.a.createElement("div",{style:{marginBottom:20}}),o.a.createElement("div",{className:"grid-block small-up-1 medium-up-1 large-up-1 no-overflow"},!0===this.state.updating?o.a.createElement("div",{style:{margin:"10px"}},o.a.createElement(l.a,{content:"lottery.loading"})," "):this.getContent())))))))}},{key:"_getStats",value:function(e,t,n){var a=this;this.setState({updating:!0});var o=this.state.uri+"stats";fetch(o,{method:"get"}).then(function(o){var r=o,i=a.state.uri+"account/"+a.props.currentAccount;fetch(i,{method:"get"}).then(function(o){o.json().then(function(e){t&&t(e.stats),n&&n(e.details)}),r.json().then(function(t){e&&e(t.stats)}),a.setState({updating:!1})}).catch(function(e){console.log("fetch error:",e)})}).catch(function(e){console.log("fetch error:",e)})}}]),t}();V=Object(f.a)(V,{listenTo:function(){return[p.a,h.a]},getProps:function(){return{settings:p.a.getState().settings,currentAccount:h.a.getState().currentAccount||h.a.getState().passwordAccount}}});t.default=V}}]);
//# sourceMappingURL=Lottery.js.map